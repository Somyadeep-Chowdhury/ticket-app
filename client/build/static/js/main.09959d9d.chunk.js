(this["webpackJsonpws3-ticketing-tool"]=this["webpackJsonpws3-ticketing-tool"]||[]).push([[0],{13:function(e,t,s){"use strict";s.r(t),function(e){s.d(t,"setLoginPending",(function(){return c})),s.d(t,"setLoginSuccess",(function(){return o})),s.d(t,"setLoginError",(function(){return l})),s.d(t,"login",(function(){return d})),s.d(t,"checkUser",(function(){return u})),s.d(t,"getAllIssues",(function(){return p})),s.d(t,"updateIssue",(function(){return h})),s.d(t,"raiseIssue",(function(){return j})),s.d(t,"editTicket",(function(){return m})),s.d(t,"withdrawTicket",(function(){return b})),s.d(t,"getUpdatedRecord",(function(){return g})),s.d(t,"getAllUsers",(function(){return O})),s.d(t,"addUser",(function(){return x})),s.d(t,"updateUser",(function(){return f})),s.d(t,"deleteUser",(function(){return y})),s.d(t,"trasferTicket",(function(){return v})),s.d(t,"getAllIssueTypes",(function(){return N})),s.d(t,"addIssue",(function(){return T})),s.d(t,"deleteIssue",(function(){return S})),s.d(t,"mailToUser",(function(){return C})),s.d(t,"mailToSME",(function(){return w})),s.d(t,"replyMail",(function(){return E})),s.d(t,"withdrawTicketMail",(function(){return A})),s.d(t,"uploadExcel",(function(){return k})),s.d(t,"notificationMail",(function(){return I})),s.d(t,"getUsers",(function(){return D})),s.d(t,"uploadeSyncExcel",(function(){return _})),s.d(t,"postNotification",(function(){return R})),s.d(t,"getPopNotification",(function(){return U})),s.d(t,"getAllNotification",(function(){return L})),s.d(t,"changeMenu",(function(){return M})),s.d(t,"fetchTicketByNumber",(function(){return P})),s.d(t,"slackNotification",(function(){return F}));var a=s(82),r=s(15),n=s(25),i=s.n(n),c=function(e){return{type:a.c,payload:{isLoginPending:e}}},o=function(e){return{type:a.d,payload:{data:e}}},l=function(e){return{type:a.b,payload:{isLoginError:e}}};function d(t,s){return function(a){a(c(!0));var r=new e(s).toString("base64");i.a.get("/login?email="+t+"&pass="+r).then((function(e){200===e.status?e.data.isAuthenticated&&e.data.isAuthenticated?(e.data.userEmail=t,a(u(e.data))):a(l(e.data.message)):a(l("Server Error, Please Try Later!"))})).catch((function(e){a(l("Network Error, Please Try Later!"))}))}}function u(e){return function(t){i.a.post("/api/v1/checkUser",{userId:e.userEmail}).then((function(s){var a=s.data;a.empId=e.empId,a.username=e.username,a.userEmail=e.userEmail,a.role=s.data.role,s.data.isAuthenticated&&200===s.status?t(o(a)):t(l(s.data.message))})).catch((function(e){t(l(e))}))}}function p(e){return function(t){i.a.post("/api/v1/getAllIssues",e).then((function(e){200===e.status?t({type:r.c,payload:{allIssues:e.data}}):t(l(e.data.message))})).catch((function(e){t(l(e))}))}}function h(e){return function(t){i.a.post("/api/v1/response",e).then((function(s){200===s.status?(t({type:r.u,payload:{response_data:s}}),t(p(e))):t(l(s.data.message))})).catch((function(e){t(l(e))}))}}function j(e){return function(t){i.a.post("/api/v1/craeteIncident",e).then((function(s){201===s.status&&"Successfully Inserted"===s.data.message?(t({type:r.h,payload:{Details:s.data.data}}),t(C(e)),t(w(e))):(t(l(s.data.message)),t({type:r.h,payload:{Details:[]}}))})).catch((function(e){t(l("Network Error, Please try Later!")),t({type:r.h,payload:{Details:[]}})}))}}function m(e){return function(t){i.a.post("/api/v1/editIncident",e).then((function(s){200===s.status?(t({type:r.k,payload:{editResponse:s}}),t(p(e))):t(l(s.data.message))}))}}function b(e){return function(t){i.a.post("/api/v1/withdrawTicket",e).then((function(s){200===s.status?(t({type:r.z,payload:{withdrawResponse:s}}),t(p(e))):t(l(s.data.message))}))}}function g(e){return function(t){i.a.post("/api/v1/getupdatedIssue",e).then((function(e){200===e.status?t({type:r.d,payload:{updateRecord:e.data.data}}):t(l(e.data.message))})).catch((function(e){t(l(e))}))}}function O(){return function(e){i.a.post("/api/v1/getAllUsers").then((function(t){200===t.status?e({type:r.e,payload:{allUsers:t.data.data}}):e(l(t.data.message))})).catch((function(t){e(l(t))}))}}function x(e){return function(t){i.a.post("/api/v1/addUser",e).then((function(e){200===e.status?(t({type:r.b,payload:{userRes:e}}),t(O())):t(l(e.data.message))}))}}function f(e){return function(t){i.a.post("/api/v1/updateUser",e).then((function(e){200===e.status?(t({type:r.v,payload:{updateuserRes:e}}),t(O())):t(l(e.data.message))}))}}function y(e){return function(t){i.a.post("/api/v1/deleteUser",e).then((function(e){200===e.status?(t({type:r.j,payload:{deleteRes:e}}),t(O())):t(l(e.data.message))}))}}function v(e){return function(t){i.a.post("/api/v1/ticketTransfer",e).then((function(s){200===s.status?(t({type:r.t,payload:{transferTicket:s}}),t(p(e))):t(l(s.data.message))}))}}function N(){return function(e){i.a.get("/api/v1/getAllIssueTypes").then((function(t){200===t.status?e({type:r.m,payload:{issueType:t.data.data}}):e(l(t.data.message))}))}}function T(e){return function(t){i.a.post("/api/v1/addIssue",e).then((function(e){200===e.status?(t({type:r.a,payload:{addIssueData:e}}),t(N())):t(l(e.data.message))}))}}function S(e){return function(t){i.a.post("/api/v1/DELETEISSUE",e).then((function(e){200===e.status?(t({type:r.i,payload:{deleteIssue:e}}),t(N())):t(l(e.data.message))}))}}function C(e){return function(t){i.a.post("/api/v1/mailToUser",e).then((function(e){200===e.status?t({type:r.q,payload:{userMail:e}}):t(l(e.data.message))}))}}function w(e){return function(t){i.a.post("/api/v1/mailToSME",e).then((function(e){})).catch((function(e){}))}}function E(e){return function(t){i.a.post("/api/v1/replyMail",e).then((function(e){200===e.status?t({type:r.s,payload:{replyMail:e}}):t(l(e.data.message))}))}}function A(e){return function(t){i.a.post("/api/v1/withdrawTicketMail",e).then((function(e){200===e.status?t({type:r.A,payload:{withdrawMail:e}}):t(l(e.data.message))}))}}function k(e,t){return function(s){i.a.post("/api/v1/uploadExcel",{data:e,userData:t}).then((function(e){200===e.status?s({type:r.w,payload:{excelData:e}}):s(l(e.data.message))})).catch((function(e){s(l(e))}))}}function I(e){return function(t){i.a.post("/api/v1/notificationMail",{data:e}).then((function(e){200===e.status?t({type:r.r,payload:{notificationMail:e}}):t(l(e.data.message))}))}}function D(e){return function(t){i.a.post("/api/v1/ampUsers",{data:e}).then((function(e){200===e.status?t({type:r.f,payload:{ampUsers:e.data.data}}):t(l(e.data.message))}))}}function _(e){return function(t){i.a.post("/api/v1/uploadeSyncExcel",e).then((function(e){200===e.status?t({type:r.x,payload:{eSyncexcelData:e}}):t(l(e.data.message))})).catch((function(e){t(l(e))}))}}function R(e){return function(t){i.a.post("/api/v1/postNotification",{data:e}).then((function(e){200===e.status?t({type:r.r,payload:{notificationMail:e}}):t(l(e.data.message))})).catch((function(e){t(l(e.message))}))}}function U(e){return function(t){i.a.post("/api/v1/getPopNotification",{data:e}).then((function(e){200===e.status?t({type:r.y,payload:{data:e.data}}):t(l(e.data.message))})).catch((function(e){t(l(e.message))}))}}function L(){return function(e){i.a.get("/api/v1/allNotification").then((function(t){200===t.status?e({type:r.n,payload:{allNotifications:t.data.data}}):e(l(t.data.message))}))}}var M=function(e){return function(t){t({type:r.g,payload:{menu:e}})}},P=function(e,t){return function(s){var a=t.length>0&&null!==e?t.filter((function(t){return t.TICKET_NO===e})):[];s({type:r.l,payload:a})}};function F(e){return function(t){i.a.post("/api/v1/slackNotification",{data:e}).then((function(e){200===e.status?t({type:r.r,payload:{notificationMail:e}}):t(l(e.data.message))}))}}}.call(this,s(158).Buffer)},15:function(e,t,s){"use strict";s.d(t,"o",(function(){return a})),s.d(t,"h",(function(){return r})),s.d(t,"c",(function(){return n})),s.d(t,"u",(function(){return i})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"j",(function(){return d})),s.d(t,"t",(function(){return u})),s.d(t,"m",(function(){return p})),s.d(t,"a",(function(){return h})),s.d(t,"i",(function(){return j})),s.d(t,"k",(function(){return m})),s.d(t,"z",(function(){return b})),s.d(t,"v",(function(){return g})),s.d(t,"q",(function(){return O})),s.d(t,"p",(function(){return x})),s.d(t,"s",(function(){return f})),s.d(t,"A",(function(){return y})),s.d(t,"w",(function(){return v})),s.d(t,"r",(function(){return N})),s.d(t,"f",(function(){return T})),s.d(t,"x",(function(){return S})),s.d(t,"y",(function(){return C})),s.d(t,"n",(function(){return w})),s.d(t,"g",(function(){return E})),s.d(t,"l",(function(){return A}));var a="INITIAL_STATE",r="CREATE_ISSUE",n="ALL_ISSUES",i="UPDATE_REQUEST",c="ALL_UPDATED_RECORD",o="ALL_USERS",l="ADD_USER",d="DELETE_USER",u="TICKET_TRANSFER",p="GET_ALLISSUETYPES",h="ADD_ISSUE",j="DELETE_ISSUE",m="EDIT_TICKET",b="WITHDRAW_TICKET",g="UPDATE_USER",O="MAIL_TO_USER",x="MAIL_TO_SME",f="REPLY_MAIL",y="WITHDRAW_TICKET_MAIL",v="UPLOAD",N="NOTIFICATION_MAIL",T="AMP_USERS",S="UPLOAD_ESYNC",C="VERIFY_ISSUE",w="GET_ALL_NOTIFICATION",E="CHANGE_MENU",A="FETCH_TICKET_DETAILS"},170:function(e,t,s){},232:function(e,t,s){},319:function(e,t,s){},335:function(e,t,s){},336:function(e,t,s){},338:function(e,t){},400:function(e,t,s){},422:function(e,t,s){},445:function(e,t,s){},447:function(e,t){},448:function(e,t){},504:function(e,t,s){},506:function(e,t,s){},507:function(e,t,s){"use strict";s.r(t),s.d(t,"history",(function(){return ms}));var a=s(1),r=s.n(a),n=s(18),i=s.n(n),c=s(56),o=s(23),l=s(21),d=s(355),u=s(12),p=s(82),h={user_detail:{},isLoginSuccess:!1,isLoginPending:!1,isLoginError:null,getAccountData:[],excelData:[],error:"",getNames:[],Success:!1},j=s(15),m={result:"",formDate:"",updateResult:"",updateRecord:"",userRes:"",allIssues:"",allUsers:[],transferTicket:"",issueTypes:"",addIssueData:"",deleteIssue:"",editResponse:"",withdrawResponse:"",updateuserRes:"",userMail:"",SMEMail:"",replyMail:"",withdrawMail:"",ampUsers:"",verify:[],allNotification:[],menuData:"",ticketRecord:[]},b=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.c:return Object(u.a)(Object(u.a)({},e),{},{isLoginPending:!0,isLoginError:null});case p.d:return Object(u.a)(Object(u.a)({},e),{},{isLoginSuccess:!0,Success:!0,user_details:t.payload.data,isLoginError:null,isLoginPending:!1});case p.b:return Object(u.a)(Object(u.a)({},e),{},{isLoginPending:!0,isLoginError:t.payload.isLoginError});case p.a:return{state:e};default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.h:return Object(u.a)(Object(u.a)({},e),{},{result:t.payload.Details});case j.c:return Object(u.a)(Object(u.a)({},e),{},{allIssues:t.payload.allIssues.data});case j.u:return Object(u.a)(Object(u.a)({},e),{},{updateResult:t.payload.response_data});case j.d:return Object(u.a)(Object(u.a)({},e),{},{updateRecord:t.payload.updateRecord});case j.e:return Object(u.a)(Object(u.a)({},e),{},{allUsers:t.payload.allUsers});case j.b:return Object(u.a)(Object(u.a)({},e),{},{userRes:t.payload.userRes});case j.j:return Object(u.a)(Object(u.a)({},e),{},{deleteRes:t.payload.deleteRes});case j.t:return Object(u.a)(Object(u.a)({},e),{},{transferTicket:t.payload.transferTicket});case j.m:return Object(u.a)(Object(u.a)({},e),{},{issueTypes:t.payload.issueType});case j.a:return Object(u.a)(Object(u.a)({},e),{},{addIssueData:t.payload.addIssueData});case j.i:return Object(u.a)(Object(u.a)({},e),{},{deleteIssue:t.payload.deleteIssue});case j.k:return Object(u.a)(Object(u.a)({},e),{},{editResponse:t.payload.editResponse});case j.z:return Object(u.a)(Object(u.a)({},e),{},{withdrawResponse:t.payload.withdrawResponse});case j.v:return Object(u.a)(Object(u.a)({},e),{},{updateuserRes:t.payload.updateuserRes});case j.q:return Object(u.a)(Object(u.a)({},e),{},{userMail:t.payload.userMail});case j.p:return Object(u.a)(Object(u.a)({},e),{},{SMEMail:t.payload.SMEMail});case j.s:return Object(u.a)(Object(u.a)({},e),{},{replyMail:t.payload.replyMail});case j.A:return Object(u.a)(Object(u.a)({},e),{},{withdrawMail:t.payload.withdrawMail});case j.w:return Object(u.a)(Object(u.a)({},e),{},{excelData:t.payload.excelData});case j.r:return Object(u.a)(Object(u.a)({},e),{},{notification:t.payload.notificationMail});case j.f:return Object(u.a)(Object(u.a)({},e),{},{ampUsers:t.payload.ampUsers});case j.x:return Object(u.a)(Object(u.a)({},e),{},{eSyncData:t.payload.eSyncexcelData});case j.y:return Object(u.a)(Object(u.a)({},e),{},{verify:t.payload.data.data});case j.n:return Object(u.a)(Object(u.a)({},e),{},{allNotification:t.payload.allNotifications});case j.g:return Object(u.a)(Object(u.a)({},e),{},{menuData:t.payload.menu});case j.l:return Object(u.a)(Object(u.a)({},e),{},{ticketRecord:t.payload});case j.o:return Object(u.a)(Object(u.a)({},e),{},{result:void 0});default:return e}}});s(400);var g=s(26),O=s(27),x=s(29),f=s(28),y=s(40),v=(s(401),s(13)),N=s.p+"static/media/IBM_white.879438fe.png",T=(s(422),s(532)),S=s(0),C=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={email:"",passwords:"",error:"",err:!1},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),1500)},e}return Object(O.a)(s,[{key:"validate",value:function(e){e.preventDefault();var t=this.state,s=t.email,a=t.passwords;this.setState({err:!1}),""===this.state.email&&""===this.state.passwords?(this.setState({error:"Email Id and password should not be blank!",err:!0,iconColor:"text-danger"}),this.error()):this.state.email.includes("ibm.com")?""===this.state.passwords?(this.setState({error:"Password should not be blank!",err:!0,iconColor:"text-danger"}),this.error()):this.doLogin(s,a):(this.setState({error:"Allowed IBM authorized user only!",err:!0,iconColor:"text-danger"}),this.error())}},{key:"doLogin",value:function(e,t){this.props.actions.login(e,t),this.setState({email:"",passwords:""})}},{key:"render",value:function(){var e=this,t=this.props,s=t.isLoginPending,a=t.isLoginError;return Object(S.jsxs)("div",{className:".container-fluid backgroundClass",children:[Object(S.jsx)("div",{className:"header",children:Object(S.jsx)("img",{src:N,alt:"ibm",className:"ibm-image"})}),Object(S.jsx)("div",{className:"headingClass",children:"CPSD Self Service Ticketing Tool"}),a&&Object(S.jsx)("div",{className:"invalid",children:a}),Object(S.jsx)("div",{className:"loginDiv",children:Object(S.jsxs)("form",{onSubmit:this.validate.bind(this),children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"exampleInputEmail1",className:"labelClass",children:Object(S.jsx)("strong",{children:"Sign in with your w3id"})}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"email",id:"email",className:"text-input form-control","aria-describedby":"emailHelp",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"exampleInputPassword1",className:"labelClass",children:Object(S.jsx)("strong",{children:"Password"})}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"password",className:"text-input form-control",id:"password",onChange:function(t){return e.setState({passwords:t.target.value})},value:this.state.passwords})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-primary loginButtonClass",children:"Sign In"})]})}),null===a&&s&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border spin",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsx)("div",{children:Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})}),Object(S.jsx)("div",{className:"modal login-modal",id:"login",children:Object(S.jsx)("div",{className:"modal-dialog modal-lg",children:Object(S.jsxs)("div",{className:"modal-content",children:[Object(S.jsx)("div",{className:"modal-header",children:Object(S.jsx)("h4",{className:"modal-title",children:"Aditya Rao"})}),Object(S.jsxs)("div",{className:"modal-body",children:["Transformation & Automation - CPS F&A Global Lead (Cognitive Process Services) Global Business Services",Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),"Email ID  :  adityarao@in.ibm.com",Object(S.jsx)("br",{})]}),Object(S.jsx)("div",{className:"modal-footer",children:Object(S.jsx)("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",children:"OK"})})]})})}),Object(S.jsxs)("div",{className:"footer",children:[Object(S.jsx)("button",{id:"termsLink",className:"ds-display-inline-block ds-mar-b-1 hp-footer-link text-footer but-foot",rel:"noopener noreferrer",onClick:this.handleContact,"data-toggle":"modal","data-target":"#login",children:"Contact"}),Object(S.jsx)(c.b,{id:"termsLink",to:{pathname:"https://w3.ibm.com/w3/info_terms_of_use.html"},rel:"noopener noreferrer",target:"_blank",className:"ds-display-inline-block ds-mar-b-1 hp-footer-link text-footer",children:"Terms of Use"}),Object(S.jsx)(c.b,{id:"privacyLink",to:{pathname:"https://w3.ibm.com/w3-privacy-notice"},target:"_new",className:"ds-display-inline-block ds-mar-b-1 hp-footer-link text-footer",children:"Privacy Policy"}),Object(S.jsx)(c.b,{id:"accessibilityLink",rel:"noopener noreferrer",to:{pathname:"https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Wf49a0f070e65_41de_bb0a_ff81f7eb3319/page/yourIBM%20Accessibility%20Features"},target:"_blank",className:"ds-display-inline-block ds-mar-b-1 hp-footer-link text-footer",children:"w3 Accessibility"}),Object(S.jsx)(c.b,{id:"conductLink",rel:"noopener noreferrer",to:{pathname:"https://w3.ibm.com/ibm/documents/corpdocweb.nsf/ContentDocsByTitle/Business+Conduct+Guidelines"},className:"ds-display-inline-block ds-mar-b-1 hp-footer-link text-footer",target:"_blank",children:"Business Conduct Guidelines"})]})]})}}]),s}(a.Component),w=Object(o.b)((function(e){return{isLoginPending:e.user.isLoginPending,isLoginSuccess:e.user.isLoginSuccess,isLoginError:e.user.isLoginError}}),(function(e){return{actions:Object(l.b)({login:v.login},e)}}))(C),E=s(95),A=s(66),k=s(6),I=s(3),D=s(63),_=s(544),R=s(543),U=s(254),L=s.n(U),M=s(330),P=s(521),F=s(83),B=s(545),W=s(184),G=s(369),Y=s.n(G),H=s(371),z=s.n(H),K=s(370),q=s.n(K),V=s(517),J=s(333),Q=s(546),X=s(548),Z=s(547),$=s(255),ee=s.n($),te=s(550),se=s(121),ae=s.n(se),re=s(367),ne=s.n(re),ie=s(122),ce=s.n(ie),oe=s(536),le=(s(319),s(320)),de=s(537),ue=s(542),pe=s(540),he=s(541),je=s(539),me=s(514),be=r.a.forwardRef((function(e,t){return Object(S.jsx)(me.a,Object(u.a)({direction:"up",ref:t},e))})),ge=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={name:"",createdDate:"",description:"",practitioner:"",recordId:"",flag:!1,radio:"",issuetype:"",ccomments:"",spinnerFlag:!1,category:"",error:"",err:!1,sections:[],section:"",types:[],createFor:"",ticketType:"",issueval:"",types_of_ticket:[],severity:"",verifyMessage:"",verify:!1,type:"",sharedInfo:""},e.handleReset=function(){e.setState({description:"",verifyMessage:"",verify:!1,issuetype:"",practitioner:"",section:"",sections:[],severity:"",sharedInfo:"",spinnerFlag:!1,err:!1,error:"",flag:!1,type:""})},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),3500)},e.handleSubmit=function(){""===e.state.type||""===e.state.issuetype||void 0===e.state.issuetype||""===e.state.severity||void 0===e.state.severity||""===e.state.practitioner||""===e.state.description||void 0===e.state.section||""===e.state.section||0===e.state.description.length||""===e.state.ticketType?(e.setState({error:"All Fields Are Mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.state.description.length>1e3?(e.setState({error:"Description should not exceed 1000 characters",err:!0,iconColor:"text-danger"}),e.error()):e.handleComment()},e.handleComment=function(){var t=1e5,s=Math.floor(9e5*Math.random())+t,a=new Date,r=a.getDate();r<=9&&(r="0"+r);var n=a.getMonth()+1;n<=9&&(n="0"+n);var i=a.getHours();i<=9&&(i="0"+i);var c=a.getMinutes();c<=9&&(c="0"+c);var o=e.state;delete o.err,delete o.error;var l={};Object.assign(l,{type:e.state.type,issuetype:e.state.issuetype,name:e.state.name,practitioner:e.state.practitioner,category:e.state.category,description:e.state.description.replace(/[,+()'"*<>{}]/g," "),severity:e.state.severity,createdDate:r+"-"+n+"-"+a.getFullYear()+" "+i+":"+c,recordId:s,section:e.state.section,sharedInfo:e.state.sharedInfo,createFor:e.state.createFor,ticketType:e.state.ticketType,loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail}),e.setState({spinnerFlag:!0}),e.props.actions.raiseIssue(l),setTimeout((function(){1===e.props.result.length?(e.setState({error:"Ticket Successfully Submitted",err:!0,iconColor:"text-success",spinnerFlag:!1,issueval:"Success"}),e.error(),e.props.actions.changeMenu("All Ticket Logs"),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),8e3)},e.handleSubcategory=function(t){var s,a=e.state.issuetype;e.state.types&&e.state.types.forEach((function(e){e.name===a&&e.ticketType&&e.ticketType.forEach((function(e){e.section===t&&(s=e.type)}))})),e.setState({section:t,types_of_ticket:s,ticketType:"",verify:!1,verifyMessage:""}),e.props.actions.getPopNotification(e.state.issuetype)},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.user_details&&this.setState({name:this.props.user_details.userEmail.toLowerCase()}),this.props.actions.getAllIssueTypes()}},{key:"componentDidUpdate",value:function(e){if(e.issueTypes!==this.props.issueTypes&&this.props.issueTypes&&0!==this.props.issueTypes.length&&this.setState({types:this.props.issueTypes}),this.props.verify!==e.verify)if(this.props.verify.length>0){var t=this.state.section,s=this.props.verify.filter((function(e){return e.ISSUE_CATEGORY===t}));if(0!==s.length&&this.props.verify.length>0){var a=s[0].REASONS+" Alerts!\n"+s[0].DESCRIPTION+" from "+s[0].START_DATE+" "+s[0].START_TIME+" to "+s[0].END_DATE+" "+s[0].END_TIME;this.setState({verifyMessage:a,verify:!1})}else if(0===s.length&&""===this.props.verify[0].ISSUE_CATEGORY){var r=s[0].REASONS+" Alerts!\n"+this.props.verify[0].DESCRIPTION+" from "+this.props.verify[0].START_DATE+" "+this.props.verify[0].START_TIME+" to "+this.props.verify[0].END_DATE+" "+this.props.verify[0].END_TIME;this.setState({verifyMessage:r,verify:!1})}else this.setState({verifyMessage:"",verify:!0})}else this.setState({verifyMessage:"",verify:!0})}},{key:"Reset",value:function(){var e=this;setTimeout((function(){e.handleReset()}),500)}},{key:"handleChangeType",value:function(e){var t;this.state.types&&this.state.types.forEach((function(s){s.name===e.target.value&&(t=s.section)})),0===t.length?this.setState({issuetype:e.target.value,sections:[],types_of_ticket:[],section:"",ticketType:""}):this.setState({issuetype:e.target.value,sections:t,section:"",ticketType:"",types_of_ticket:[]})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container-fluid",children:[this.state.types&&0!==this.state.types.length?Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Raise New Ticket"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsxs)("label",{className:"mb-3  pr-5",children:[Object(S.jsx)("strong",{children:"Request For "}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("label",{className:"radio-inline pr-3",children:[Object(S.jsx)("input",{value:"Self",checked:"Self"===this.state.type,type:"radio",name:"Self",onChange:function(t){return e.setState({type:t.target.value,practitioner:e.props.user_details.userEmail.toLowerCase(),severity:"Low (less than 5 Employees)"})}}),"\xa0\xa0Self"]}),Object(S.jsxs)("label",{className:"radio-inline",children:[Object(S.jsx)("input",{type:"radio",name:"Others",value:"Others",checked:"Others"===this.state.type,onChange:function(t){return e.setState({type:t.target.value,practitioner:"",severity:""})}}),"\xa0\xa0For Others"]})]})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised By"})}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.name,type:"text"})})]}),"Others"===this.state.type&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised For"})}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",placeholder:"User email ID",value:this.state.practitioner,onChange:function(t){return e.setState({practitioner:t.target.value})},type:"text"})})]}),Object(S.jsxs)("div",{className:"row",children:["Self"===this.state.type?Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsxs)("label",{children:[Object(S.jsx)("strong",{children:"Impact Category"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}):Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsxs)("label",{children:[Object(S.jsx)("strong",{children:"Priority Category"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control",value:this.state.severity,disabled:"Self"===this.state.type,onChange:function(t){return e.setState({severity:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),Object(S.jsxs)("option",{children:["High ","(greater than 21 Employees)"," "]},"high"),Object(S.jsxs)("option",{children:["Medium ","(greater than 6 - less than 20 Employees)"]},"medium"),Object(S.jsxs)("option",{children:["Low ","(less than 5 Employees)"]},"low")]})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Share Ticket Info"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",placeholder:"Email ID Details (Optional)",value:this.state.sharedInfo,onChange:function(t){return e.setState({sharedInfo:t.target.value})}})})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsxs)("label",{className:" pt-2 pl-3",children:[Object(S.jsx)("strong",{children:"Category"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.issuetype,onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types&&this.state.types.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.sections&&0!==this.state.sections.length&&Object(S.jsxs)("div",{children:[" ",Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsxs)("label",{className:"pt-2 pl-3",children:[Object(S.jsx)("strong",{children:"Portals & Dashboard"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.section,onChange:function(t){return e.handleSubcategory(t.target.value)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.sections&&this.state.sections.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:this.state.types_of_ticket.length>0&&!0===this.state.verify&&Object(S.jsxs)("label",{className:"pt-2 pl-3",children:[Object(S.jsx)("strong",{children:"Ticket Type"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]})}),this.state.types_of_ticket.length>0&&!0===this.state.verify&&Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.ticketType,onChange:function(t){return e.setState({ticketType:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types_of_ticket&&this.state.types_of_ticket.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]})]})]})]}),Object(S.jsx)("div",{className:"row mt-2",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsxs)("label",{children:[Object(S.jsx)("strong",{children:"Description Of The Issue"}),Object(S.jsx)("span",{className:"required-aster",children:"*"})]}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Describe your concern here",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},type:"text",rows:"6"})]})})]}),Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsx)("button",{component:c.b,to:"/all-tickets",className:"btn btu-submit",onClick:this.handleSubmit,disabled:!this.state.verify,children:"Create"})}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinnerClass text-center",children:Object(S.jsx)(oe.a,{})})]}):Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error}),Object(S.jsxs)(de.a,{open:""!==this.state.verifyMessage&&!1===this.state.verify,TransitionComponent:be,keepMounted:!0,onClose:this.handleReset,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(S.jsx)(je.a,{id:"alert-dialog-slide-title",children:"Notification"}),Object(S.jsx)(pe.a,{children:Object(S.jsx)(he.a,{id:"alert-dialog-slide-description",children:""!==this.state.verifyMessage?this.state.verifyMessage:"Sorry, Network Error. Please Try Later"})}),Object(S.jsxs)(ue.a,{children:[Object(S.jsx)(le.a,{onClick:function(){return e.setState({verify:!0})},color:"primary",children:"Create Ticket"}),Object(S.jsx)(le.a,{onClick:function(){e.handleReset(),e.props.actions.changeMenu("All Ticket Logs")},color:"primary",children:"Close"})]})]})]})}}]),s}(a.Component),Oe=Object(y.f)(Object(o.b)((function(e){return{allUsers:e.page.allUsers,user_details:e.user.user_details,result:e.page.result,issueTypes:e.page.issueTypes,verify:e.page.verify}}),(function(e){return{actions:Object(l.b)({raiseIssue:v.raiseIssue,getAllIssueTypes:v.getAllIssueTypes,mailToUser:v.mailToUser,mailToSME:v.mailToSME,getAllUsers:v.getAllUsers,getPopNotification:v.getPopNotification,changeMenu:v.changeMenu},e)}}))(ge)),xe=s(372),fe=s.n(xe),ye=s(373),ve=s.n(ye),Ne=s(86),Te=s.n(Ne),Se=(s(170),s(123)),Ce=(s(335),function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){return Object(g.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"render",value:function(){var e=this.props,t=e.value,s=e.index,a=e.change,r={green:"#24a148",orange:"#ff8533",yellow:"#f1c21b",red:"#da1e28"},n=r.white;return"Closed"===t?n=r.green:"WIP"===t?n=r.yellow:"New"===t?n=r.red:"Open"===t&&(n=r.orange),Object(S.jsx)("p",{className:"cellClass",value:t,onChange:function(e){return a(e.target.value,s)},style:{backgroundColor:n,color:"white",fontWeight:"bold"},children:t})}}]),s}(a.Component));var we=function(e,t,s){var a,r;e<t?(a=e,r=t):(a=t,r=e);var n=Math.floor((r-a)/864e5),i=Math.floor(n/7);return 0===i&&a.getDate()===r.getDate()?i=0:i&&a.getDate()!==r.getDate()&&a.getDay()===r.getDay()&&(i+=1),5*i+(a.getDay()===r.getDay()&&a.getDate()===r.getDate()?0:0===a.getDay()&&6===r.getDay()?5:6===a.getDay()&&0===r.getDay()?0:6===r.getDay()||0===r.getDay()?5-a.getDay():0===a.getDay()||6===a.getDay()?r.getDay():r.getDay()>a.getDay()?r.getDay()-a.getDay():a.getDay()===r.getDay()?0:5+r.getDay()-a.getDay())},Ee=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){return Object(g.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"render",value:function(){var e=this.props,t=e.value,s=e.index,a=e.change,r="red",n="black",i="white",c=NaN+t+"'",o="",l=n,d="";return c.includes("+")?(o=r,l=i,d=t):void 0===c?(o=i,d=""):(o="",l=n,d=t),Object(S.jsx)("p",{className:"cellColor",value:t,onChange:function(e){return a(e.target.value,s)},style:{backgroundColor:o,color:l,fontWeight:"bold"},children:d})}}]),s}(a.Component),Ae=s(334),ke=[{name:"CREATED_DATE",label:"Created Date & Time",options:{filter:!0,sort:!0}},{name:"TICKET_NO",label:"Ticket No.",options:{filter:!0,sort:!0}},{name:"NAME",label:"Issue Raised By",options:{filter:!0,sort:!0}},{name:"ISSUE_TYPE",label:"Category",options:{filter:!0,sort:!0}},{name:"SECTION",label:"Portals & Dashboard",options:{filter:!0,sort:!0}},{name:"TICKET_TYPE",label:"Ticket Type",options:{filter:!0,sort:!0}},{name:"CLOSE_DATE",label:"Planned Closure Date",options:{filter:!0,sort:!0}},{name:"TAT",label:"TAT",options:{filter:!0,sort:!0,customBodyRender:function(e,t,s){return Object(S.jsx)(Ee,{value:e,index:t.rowIndex,change:function(e){return s(e)}})}}},{name:"STATUS",label:"Status",options:{filter:!0,sort:!0,customBodyRender:function(e,t,s){return Object(S.jsx)(Ce,{value:e,index:t.columnIndex,change:function(e){return s(e)}})}}}],Ie=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={buttons:!1,data:"",show:!1,preventionplan:"",action:"",date:"",status:"",issueimpact:"",ownership:"",owner:"",response:!1,view_response:!1,issueList:[],name:"",createdDate:"",description:"",practitioner:"",recordId:"",radio:"",issuetype:"",ccomments:!1,category:"",tat:"",spinnerFlag:!1,flag:!1,message:"",newdate:"",newtat:"",responseflag:!1,btnval:"",userResponse:"",close_tat:"",close_date:"",title:"",ticketStatus:"",internalComments:"",transferTo:"",justification:"",userList:"",person:!1,issueTagging:"",resDate:"",ticketType:"",wipCount:0,openCount:0,closedCount:0},e.handleClose=function(){e.setState({show:!1,response:!1,buttons:!1,flag:!1}),e.handleReset()},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),3500)},e.handleSend=function(t,s){"reply"===s?(e.setState({btnval:"reply"}),""===e.state.ticketStatus?""===e.state.userResponse||""===e.state.date?(e.setState({error:"Please Fill All Fields",err:!0,iconColor:"text-danger"}),e.error()):e.handleSubmit(t,s):""===e.state.userResponse?(e.setState({error:"Please Fill All Fields",err:!0,iconColor:"text-danger"}),e.error()):e.handleSubmit(t,s)):"reply&close"===s&&(""===e.state.ticketStatus?""===e.state.date||""===e.state.newdate||""===e.state.userResponse||""===e.state.internalComments||""===e.state.issueTagging?(e.setState({error:"Please Fill All Fields",err:!0,iconColor:"text-danger"}),e.error()):e.handleSubmit(t,s):""===e.state.newdate||""===e.state.userResponse||""===e.state.internalComments||""===e.state.issueTagging?(e.setState({error:"Please Fill All Fields",err:!0,iconColor:"text-danger"}),e.error()):e.handleSubmit(t,s))},e.handleSubmit=function(t,s){var a;if("reply&close"===s){if(""===e.state.ticketStatus){var r=new Date,n=r.getDate();n<=9&&(n="0"+n);var i=r.getMonth()+1;i<=9&&(i="0"+i),a=n+"-"+i+"-"+r.getFullYear()+" "+r.getHours()+":"+r.getMinutes()}else a=e.state.close_date;if(""!==e.state.newdate){var c=new Date(e.state.newdate),o=c.getDate();o<=9&&(o="0"+o);var l=c.getMonth()+1;l<=9&&(l="0"+l);var d=o+"-"+l+"-"+c.getFullYear()+" "+c.getHours()+":"+c.getMinutes()}}else a="Open"===e.state.ticketStatus||"WIP"===e.state.ticketStatus?e.state.close_date:e.state.date;var u=new Date,p={};Object.assign(p,{recordId:e.state.recordId,date:a,btnval:e.state.btnval,preventionplan:e.state.preventionplan,status:t,ownership:e.props.user_details.userEmail,issueimpact:e.state.issueimpact,action:e.state.action,current_date:u,tat:e.state.tat,newtat:e.state.newtat,newdate:d,userResponse:e.state.userResponse.replace(/[,+()'"*<>{}]/g," "),ticketStatus:e.state.ticketStatus,internalComments:e.state.internalComments.replace(/[,+()'"*<>{}]/g," "),issueTagging:e.state.issueTagging,email:e.props.user_details.userEmail,role:e.props.user_details.role,data:"allissues",update:"sme",category:e.props.user_details.section,stagename:e.props.user_details.stagename,owner:e.state.name,createdDate:e.state.createdDate,sharedInfo:e.state.sharedInfo,name:e.state.name,issuetype:e.state.issuetype,severity:e.state.severity,section:e.state.section,practitioner:e.state.practitioner,loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail}),e.setState({spinnerFlag:!0}),e.props.actions.updateIssue(p),setTimeout((function(){e.props.updateResult&&200===e.props.updateResult.status&&"Update response"===e.props.updateResult.data.message?(e.setState({error:"You have responded to the incident successfully",err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.props.actions.replyMail(p),e.Reset()):(e.setState({show:!0,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),7e3)},e.Reset=function(){setTimeout((function(){e.handleReset()}),1e3)},e.handleDateChangeDate=function(t){var s=new Date,a=we(s,new Date(t));e.setState({date:t,tat:a})},e.handleChangeTATDate=function(t,s,a,r){var n,i;""!==r?(n=a.substring(6,10)+"-"+a.substring(3,6)+a.substring(0,2),i=new Date(n)):i=a;var c=we(i,new Date(t));e.setState({newdate:t,newtat:c})},e.handleTransfer=function(t){if(""===e.state.transferTo||""===e.state.justification)e.setState({error:"Please Fill All Fields",err:!0,iconColor:"text-danger"}),e.error();else if(e.state.transferTo.includes("@"))if(e.state.transferTo.includes(".ibm.com")){var s={};Object.assign(s,{recordId:e.state.recordId,transferTo:e.state.transferTo,justification:e.state.justification,btnval:t,email:e.props.user_details.userEmail,role:e.props.user_details.role,data:"allissues",category:e.props.user_details.section,loggedinUser:e.props.user_details.username}),e.setState({spinnerFlag:!0}),e.props.actions.trasferTicket(s),setTimeout((function(){200===e.props.transferTicket.status?(e.setState({error:"You have transfered ticket successfully",err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),7e3)}else e.setState({error:"Email contain .ibm.com",err:!0,iconColor:"text-danger"}),e.error();else e.setState({error:"Please Enter Valid Email",err:!0,iconColor:"text-danger"}),e.error()},e.handlePerson=function(t){e.setState({transferTo:t.target.value}),"Others"===t.target.value&&e.setState({person:!0})},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({ownership:this.props.user_details.userEmail,spinnerFlag:!0}),"Super Admin"===this.props.user_details.role?(this.props.actions.getAllIssues({email:this.props.user_details.userEmail,role:this.props.user_details.role,data:"getall"}),this.setState({title:"All Ticket Logs"})):"Super User"===this.props.user_details.role?(this.props.actions.getAllIssues({email:this.props.user_details.userEmail,role:this.props.user_details.role,data:"superuserissue",category:this.props.user_details.details[0].ISSUE_TYPE}),this.setState({title:"All Ticket Logs"})):(this.props.actions.getAllIssues({email:this.props.user_details.userEmail,role:this.props.user_details.role,data:"allissues",category:this.props.user_details.section}),this.setState({title:"My Queue"}),this.props.actions.getAllUsers())}},{key:"componentDidUpdate",value:function(e){if(e.allIssues!==this.props.allIssues)if(this.props.allIssues&&0!==this.props.allIssues.length){this.props.allIssues.sort((function(e,t){return new Date(t.CREATED_DATE.substring(6,10)+"-"+t.CREATED_DATE.substring(3,6)+t.CREATED_DATE.substring(0,2)+" "+t.CREATED_DATE.substring(11,17))-new Date(e.CREATED_DATE.substring(6,10)+"-"+e.CREATED_DATE.substring(3,6)+e.CREATED_DATE.substring(0,2)+" "+e.CREATED_DATE.substring(11,17))}));var t=new Date,s=0,a=0,r=0;this.props.allIssues&&this.props.allIssues.forEach((function(e){if("Closed"===e.STATUS&&(a+=1),e.TAT){var n=e.CLOSE_DATE.substring(6,10)+"-"+e.CLOSE_DATE.substring(3,6)+e.CLOSE_DATE.substring(0,2),i=new Date(n);if("Closed"===e.STATUS)Object.assign(e,{TAT:e.TAT});else{"Open"===e.STATUS?r+=1:"WIP"===e.STATUS&&(s+=1);var c=we(t,i);if(!(t>i))return c;c="+"+c,Object.assign(e,{TAT:c})}}})),this.setState({issueList:this.props.allIssues,responseflag:!0,spinnerFlag:!1,wipCount:s,openCount:r,closedCount:a})}else this.setState({issueList:[],responseflag:!0,spinnerFlag:!1});if(e.updateRecord!==this.props.updateRecord)if(this.props.updateRecord&&0!==this.props.updateRecord.length){for(var n=0;n<this.props.updateRecord.length;n++)this.setState({close_date:this.props.updateRecord[0].CLOSE_DATE,close_tat:this.props.updateRecord[0].TAT,ticketStatus:this.props.updateRecord[0].STATUS,resDate:this.props.updateRecord[this.props.updateRecord.length-1].RESPONSE_DATE});this.setState({flag:!0})}else this.props.updateRecord&&0===this.props.updateRecord.length&&this.setState({flag:!0,message:"No Response"});if(e.allUsers!==this.props.allUsers){var i=[];this.props.allUsers&&this.props.allUsers.forEach((function(e){"SME"===e.ROLE&&i.push(e)})),this.setState({userList:i})}}},{key:"sortBy",value:function(e){return function(t,s){return t[e]<s[e]?1:t[e]>s[e]?-1:0}}},{key:"handleReset",value:function(){this.setState({buttons:!1,data:"",show:!1,preventionplan:"",action:"",date:"",status:"",issueimpact:"",ownership:"",owner:"",response:!1,view_response:!1,name:"",createdDate:"",description:"",practitioner:"",recordId:"",radio:"",issuetype:"",ccomments:!1,category:"",tat:"",flag:!1,message:"",newdate:"",newtat:"",btnval:"",userResponse:"",ticketStatus:"",internalComments:"",issueTagging:"",transferTo:"",justification:"",spinnerFlag:!1,userList:"",person:!1,ticketType:""})}},{key:"render",value:function(){var e=this,t={responsive:"scrollMaxHeight",selectableRows:!1,onRowClick:function(t,s){var a=s.dataIndex,r=e.state.issueList[a];e.props.actions.getUpdatedRecord({ticket:r.TICKET_NO}),e.props.actions.getAllUsers(),e.setState({show:!0,name:r.NAME,practitioner:r.PRACTIONER,createdDate:r.CREATED_DATE,description:r.DESCRIPTION,recordId:r.TICKET_NO,severity:r.SEVERITY,issuetype:r.ISSUE_TYPE,category:r.CATEGORY,section:r.SECTION,tat:r.TAT,sharedInfo:r.SHARED_TICKET,ticketType:r.TICKET_TYPE,owner:r.OWNER})},textLabels:{body:{noMatch:"Sorry, no matching records found",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return Object(S.jsxs)("div",{className:"container-fluid Table",children:[Object(S.jsxs)("div",{className:"row rowClass",children:[Object(S.jsxs)("div",{className:"col-sm-2 col-md-2 colText",children:["Total Records : ",this.state.issueList&&this.state.issueList.length>0?this.state.issueList.length:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-new colText",children:["New : ",this.state.issueList&&this.state.issueList.length>0?parseInt(this.state.issueList.length)-(parseInt(this.state.openCount)+parseInt(this.state.wipCount)+parseInt(this.state.closedCount)):0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-open colText",children:["Open : ",this.state.issueList&&this.state.issueList.length>0?this.state.openCount:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-wip colText",children:["WIP : ",this.state.issueList&&this.state.issueList.length>0?this.state.wipCount:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-closed colText ",children:["Closed : ",this.state.issueList&&this.state.issueList.length>0?this.state.closedCount:0]})]}),!1===this.state.spinnerFlag&&!0===this.state.responseflag?Object(S.jsx)(Te.a,{title:this.state.title,data:this.state.issueList,columns:ke,options:t}):Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsxs)(Se.a,{show:this.state.show,onHide:function(t){return e.handleClose()},dialogClassName:"modal-record",size:"lg",children:[Object(S.jsx)(Se.a.Header,{style:{borderBottom:"5px #0c5bac solid",color:"#0c5bac"},closeButton:!0,children:Object(S.jsxs)(Se.a.Title,{className:"modal-title",children:[Object(S.jsxs)("span",{children:["Created Date & Time: ",this.state.createdDate]}),Object(S.jsxs)("span",{className:"modal-secondtit",children:["Ticket No : ",this.state.recordId]})]})}),Object(S.jsxs)(Se.a.Body,{className:"modal_body",children:[Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised By"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.name,type:"text"})})]}),this.state.name!==this.state.practitioner&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised For"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",value:this.state.practitioner,readOnly:!0,type:"text"})})]}),""!==this.state.sharedInfo&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Share Ticket Info"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",readOnly:!0,value:this.state.sharedInfo})})]}),Object(S.jsxs)("div",{className:"row",children:[this.state.name!==this.state.practitioner?Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Priority Category"})})}):Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Impact Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",value:this.state.severity,readOnly:!0})})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.issuetype,readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.section,readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.ticketType,readOnly:!0})})]})]})]}),Object(S.jsx)("div",{className:"row mt-2",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description Of The Issue"})}),Object(S.jsx)("textarea",{className:"form-control",value:this.state.description,readOnly:!0,type:"text",rows:"6"})]})})]}),Object(S.jsx)("h6",{className:"text-center m-3",children:"TICKET TRAIL"}),this.props.updateRecord&&0!==this.props.updateRecord.length&&!0===this.state.flag&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row rowheader",children:[Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Responded Date & Time"}),Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Stage Name"}),Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Status"})]}),Object(S.jsx)("div",{id:"accordion",children:0!==this.props.updateRecord.length&&this.props.updateRecord.map((function(e,t){var s="#collapse-"+t,a="collapse-"+t;return Object(S.jsxs)("div",{className:"card issue-accordion",children:[Object(S.jsx)("div",{className:"card-header",id:"heading-1","data-toggle":"collapse","data-target":s,"aria-expanded":"true","aria-controls":a,children:Object(S.jsxs)("div",{className:"row cardhead",children:[Object(S.jsx)("div",{className:"col-sm col-md text-center",children:e.RESPONSE_DATE}),Object(S.jsxs)("div",{className:"col-sm col-md text-center",children:[e.STAGE_NAME," "]}),Object(S.jsxs)("div",{className:"col-sm col-md text-center",children:[Object(S.jsx)("span",{style:{color:"Open"===e.STATUS?"#FF8533":"Closed"===e.STATUS?"green":"New"===e.STATUS?"#D74D4D":"WIP"===e.STATUS?"#004D99":"white"},children:e.STATUS})," "]})]})}),Object(S.jsx)("div",{id:a,className:"collapse","data-parent":"#accordion","aria-labelledby":"heading-1",children:Object(S.jsx)("div",{id:"accordion-1",children:Object(S.jsx)("div",{className:"card-body  table-responsive",id:"heading-1-1",children:Object(S.jsxs)("div",{className:"row mt-4",children:["User"!==e.STAGE_NAME?Object(S.jsx)("div",{className:"col-sm-5 col-md-6",children:Object(S.jsxs)("div",{className:"col-sm-5 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Response "})}),Object(S.jsx)("textarea",{className:"form-control",value:e.RESPONSE,readOnly:!0,type:"text",rows:"6"})]})}):Object(S.jsxs)("div",{className:"col-sm-5 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Response "})}),Object(S.jsx)("textarea",{className:"form-control",value:e.RESPONSE,readOnly:!0,type:"text",rows:"6"})]}),Object(S.jsxs)("div",{className:"col-sm-5 col-md-5",children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:e.CLOSE_DATE.split(" ",1),readOnly:!0,type:"text"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Planned TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:e.TAT,readOnly:!0,type:"text"})})]}),"undefined"!==e.ACTUAL_CLOSE_DATE&&null!==e.ACTUAL_CLOSE_DATE&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Actual Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:e.ACTUAL_CLOSE_DATE,readOnly:!0,type:"text"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Actual TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:e.ACTUAL_TAT,readOnly:!0,type:"text"})})]})]})]})]})})})})]},e.RESPONSE_DATE)}))})]}),!1===this.state.flag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),this.props.updateRecord&&0===this.props.updateRecord.length&&!0===this.state.flag&&!1===this.state.response&&Object(S.jsx)("h6",{className:"text-center",children:this.state.message}),!1===this.state.buttons&&this.props.user_details&&"SME"===this.props.user_details.role&&Object(S.jsx)("div",{className:"buttons-submit",children:"Closed"!==this.state.ticketStatus&&this.props.updateRecord&&Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({buttons:!0})},children:"Action"})}),!0===this.state.buttons&&!1===this.state.response&&Object(S.jsxs)("div",{className:"buttons-submit",children:[Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!0,btnval:"transfer"})},children:"Transfer"}),Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!0,btnval:"reply"})},children:"Reply"}),Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!0,btnval:"reply&close"})},children:"Reply & Close"}),Object(S.jsx)("br",{})]}),this.props.user_details&&"SME"===this.props.user_details.role&&!0===this.state.response&&"transfer"!==this.state.btnval&&Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"row mt-4",children:[Object(S.jsxs)("div",{className:"col-sm-5 col-md-6",children:[Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Response "})}),Object(S.jsx)("textarea",{className:"form-control mb-2",value:this.state.userResponse,onChange:function(t){return e.setState({userResponse:t.target.value})},type:"text",rows:"6"})]})}),"reply&close"===this.state.btnval&&Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-sm-5 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Internal Comments"})}),Object(S.jsx)("textarea",{className:"form-control mb-2",value:this.state.internalComments,onChange:function(t){return e.setState({internalComments:t.target.value})},type:"text",rows:"6"})]})})]}),Object(S.jsxs)("div",{className:"col-sm-5 col-md-5",children:["reply"!==this.state.btnval||"Open"!==this.state.ticketStatus&&"WIP"!==this.state.ticketStatus?Object(S.jsx)("div",{children:"reply"===this.state.btnval&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)(Ae.a,{id:"date",type:"date",className:"form-control date-field",value:this.state.date,onChange:function(t){return e.handleDateChangeDate(t.target.value)},inputProps:{min:(new Date).toISOString().slice(0,10)},InputLabelProps:{shrink:!0}})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Planned TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.tat,readOnly:!0,className:"form-control"})})," "]})]})}):Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.close_date.split(" ",1),className:"form-control",readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Planned TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.close_tat,readOnly:!0,className:"form-control"})})," "]})]}),"reply&close"===this.state.btnval&&""!==this.state.ticketStatus&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.close_date.split(" ",1),className:"form-control",readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Planned TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.close_tat,readOnly:!0,className:"form-control"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Actual Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)(Ae.a,{id:"date-actual-close",type:"date",className:"form-control date-field",value:this.state.newdate,onChange:function(t){return e.handleChangeTATDate(t.target.value,e.state.btnval,e.state.resDate,e.state.ticketStatus)},inputProps:{min:(new Date).toISOString().slice(0,10)},InputLabelProps:{shrink:!0}})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Actual TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.newtat,readOnly:!0,className:"form-control"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Issue Tagging"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsxs)("select",{value:this.state.issueTagging,onChange:function(t){return e.setState({issueTagging:t.target.value})},className:"form-control",children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),Object(S.jsx)("option",{children:"Actual Issue"}),Object(S.jsx)("option",{children:"Non Proper Usage"})]})})]})]}),"reply&close"===this.state.btnval&&""===this.state.ticketStatus&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)(Ae.a,{id:"date-close",type:"date",className:"form-control date-field",value:this.state.date,onChange:function(t){return e.handleDateChangeDate(t.target.value)},inputProps:{min:(new Date).toISOString().slice(0,10)},InputLabelProps:{shrink:!0}})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Planned TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.tat,readOnly:!0,className:"form-control"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Actual Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)(Ae.a,{id:"date-actual-close",type:"date",className:"form-control date-field",value:this.state.newdate,onChange:function(t){return e.handleChangeTATDate(t.target.value,e.state.btnval,new Date,e.state.ticketStatus)},inputProps:{min:(new Date).toISOString().slice(0,10)},InputLabelProps:{shrink:!0}})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Actual TAT"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{value:this.state.newtat,readOnly:!0,className:"form-control"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{className:"pt-3",children:Object(S.jsx)("strong",{children:"Issue Tagging"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsxs)("select",{value:this.state.issueTagging,onChange:function(t){return e.setState({issueTagging:t.target.value})},className:"form-control",children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),Object(S.jsx)("option",{children:"Actual Issue"}),Object(S.jsx)("option",{children:"Non Proper Usage"})]})})]})]})]})]})}),"transfer"===this.state.btnval&&!0===this.state.response&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-12 col-md-6 mt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Transfer to"})}),Object(S.jsxs)("select",{type:"email",className:"form-control",value:this.state.transferTo,onChange:function(t){return e.handlePerson(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.userList&&this.state.userList.map((function(e){return Object(S.jsx)("option",{children:e.EMP_EMAIL})})),Object(S.jsx)("option",{children:"Others"})]})]}),!0===this.state.person&&Object(S.jsxs)("div",{className:"col-sm-12 col-md-6 mt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Transfer to"})}),Object(S.jsx)("input",{type:"email",className:"form-control",value:this.state.otherPerson,onChange:function(t){return e.setState({otherPerson:t.target.value})}})]}),Object(S.jsxs)("div",{className:"col-sm-12 col-md-12 mt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Justification"})}),Object(S.jsx)("textarea",{className:"form-control",rows:"4",value:this.state.justification,onChange:function(t){return e.setState({justification:t.target.value})}})]})]})]}),!0===this.state.response&&"reply"===this.state.btnval&&Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn ",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleSend("WIP","reply")},children:"Reply"}),Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!1,buttons:!1,userResponse:"",date:"",tat:""})},children:"Exit"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinnerClass text-center",children:Object(S.jsx)(oe.a,{})})]}),!0===this.state.response&&"reply&close"===this.state.btnval&&Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn ",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleSend("Closed","reply&close")},children:"Reply & Close"}),Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!1,buttons:!1,internalComments:"",issueTagging:"",preventionplan:"",newdate:"",newtat:"",userResponse:""})},children:"Exit"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinnerClass text-center",children:Object(S.jsx)(oe.a,{})})]}),!0===this.state.response&&"transfer"===this.state.btnval&&Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn ",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleTransfer("transfer")},children:"Transfer"}),Object(S.jsx)("button",{className:"btn m-3 issue-btu",onClick:function(t){return e.setState({response:!1,buttons:!1,transferTo:"",otherPerson:"",justification:""})},children:"Exit"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinnerClass text-center",children:Object(S.jsx)(oe.a,{})})]})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})]})}}]),s}(a.Component),De=Object(o.b)((function(e){return{allIssues:e.page.allIssues,updateResult:e.page.updateResult,user_details:e.user.user_details,updateRecord:e.page.updateRecord,transferTicket:e.page.transferTicket,allUsers:e.page.allUsers}}),(function(e){return{actions:Object(l.b)({getAllIssues:v.getAllIssues,updateIssue:v.updateIssue,getUpdatedRecord:v.getUpdatedRecord,trasferTicket:v.trasferTicket,getAllUsers:v.getAllUsers,replyMail:v.replyMail},e)}}))(Ie),_e=[{name:"CREATED_DATE",label:"Created Date & Time",options:{filter:!0,sort:!0}},{name:"TICKET_NO",label:"Ticket No.",options:{filter:!0,sort:!0}},{name:"NAME",label:"Issue Raised By",options:{filter:!0,sort:!0}},{name:"ISSUE_TYPE",label:"Category",options:{filter:!0,sort:!0}},{name:"SECTION",label:"Portals & Dashboard",options:{filter:!0,sort:!0}},{name:"TICKET_TYPE",label:"Ticket Type",options:{filter:!0,sort:!0}},{name:"CLOSE_DATE",label:"Planned Closure Date",options:{filter:!0,sort:!0}},{name:"TAT",label:"TAT",options:{filter:!0,sort:!0,customBodyRender:function(e,t,s){return Object(S.jsx)(Ee,{value:e,index:t.rowIndex,change:function(e){return s(e)}})}}},{name:"STATUS",label:"Status",options:{filter:!0,sort:!0,customBodyRender:function(e,t,s){return Object(S.jsx)(Ce,{value:e,index:t.columnIndex,change:function(e){return s(e)}})}}}],Re=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={buttons:!1,data:"",show:!1,preventionplan:"",action:"",date:"",status:"",issueimpact:"",ownership:"",owner:"",reply:!1,view_response:!1,issueList:[],name:"",createdDate:"",clientComments:"",description:"",practitioner:"",impact:"",recordId:"",radio:"",issuetype:"",ccomments:!1,homeloc:"",Pin:"",ibmComments:"",location:"",building:"",floor:"",desk:"",starttime:"",endtime:"",accountreporting:"",category:"",worktype:"",tat:"",impacts:["Financial","Non Financial"],spinnerFlag:!1,mainspinnerFlag:!1,flag:!1,message:"",openIssues:[],responseflag:!0,planned_close_date:"",userResponse:"",ticketStatus:"",ticketType:"",btnval:"",types:[],sections:[],section:"",types_of_ticket:"",title:"My Tickets Log"},e.handleClose=function(){e.setState({show:!1,reply:!1,buttons:!1,openIssues:[],userResponse:""}),e.handleReset()},e.handleReply=function(){var t=new Date;if(""===e.state.userResponse)e.setState({error:"Please Reply",err:!0,iconColor:"text-danger"});else{var s={};Object.assign(s,{current_date:t,ownership:e.props.user_details.userEmail,recordId:e.state.recordId,status:"Open",userResponse:e.state.userResponse.replace(/[,+()'"*<>{}]/g," "),email:e.props.user_details.userEmail,role:e.props.user_details.role,planned_close_date:e.state.planned_close_date,tat:e.state.planned_tat,update:"user",stagename:null!==e.props.user_details.details[0].STAGE_NAME?e.props.user_details.details[0].STAGE_NAME:"",owner:e.state.owner,createdDate:e.state.createdDate,sharedInfo:e.state.sharedInfo,name:e.state.name,issuetype:e.state.issuetype,worktype:e.state.worktype,severity:e.state.severity,section:e.state.section,practitioner:e.state.practitioner,data:"mylog",loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail}),e.setState({spinnerFlag:!0}),e.props.actions.updateIssue(s),setTimeout((function(){e.props.updateResult&&200===e.props.updateResult.status&&"Update response"===e.props.updateResult.data.message?(e.setState({error:"You have responded to the incident successfully",err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.props.actions.replyMail(s),e.Reset()):(e.setState({show:!0,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),5e3)}},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),3500)},e.Reset=function(){setTimeout((function(){e.handleReset()}),1e3)},e.handleReset=function(){e.setState({buttons:!1,data:"",show:!1,preventionplan:"",action:"",date:"",status:"",issueimpact:"",ownership:"",owner:"",reply:!1,view_response:!1,name:"",createdDate:"",clientComments:"",description:"",practitioner:"",impact:"",recordId:"",radio:"",issuetype:"",ccomments:!1,homeloc:"",Pin:"",ibmComments:"",location:"",building:"",floor:"",desk:"",starttime:"",endtime:"",accountreporting:"",category:"",worktype:"",tat:"",impacts:["Financial","Non Financial"],spinnerFlag:!1,mainspinnerFlag:!1,flag:!1,message:"",openIssues:[],responseflag:!0,planned_close_date:"",userResponse:"",ticketStatus:"",ticketType:"",btnval:"",sections:[],types_of_ticket:"",section:""})},e.handleChangeType=function(t){var s;e.state.types&&e.state.types.forEach((function(e){e.name===t.target.value&&(s=e.section)})),e.setState({issuetype:t.target.value,sections:s,accountreporting:"",section:"",ticketType:""})},e.handleEdit=function(){var t,s,a=e.state.issuetype,r=e.state.section;e.state.types&&e.state.types.forEach((function(e){e.name===a&&(s=e.section,e.ticketType&&e.ticketType.forEach((function(e){e.section===r&&(t=e.type)})))})),e.setState({btnval:"Edit",issuetype:a,sections:s,types_of_ticket:t})},e.handleSubmit=function(){e.setState({spinnerFlag:!0}),e.props.actions.editTicket(e.incidentObj()),setTimeout((function(){e.props.editResponse&&200===e.props.editResponse.status&&"Edited"===e.props.editResponse.data.message?(e.setState({error:"Ticket Updated",err:!0,iconColor:"text-success",spinnerFlag:!1,issueval:"Success"}),e.error(),e.props.actions.mailToUser(e.incidentObj()),e.props.actions.mailToSME(e.incidentObj()),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),5e3)},e.incidentObj=function(){var t=new Date,s=t.getDate();s<=9&&(s="0"+s);var a=t.getMonth()+1;a<=9&&(a="0"+a);var r=t.getHours();r<=9&&(r="0"+r);var n,i=t.getMinutes();i<=9&&(i="0"+i),n=e.state.name!==e.state.practitioner?"Others":"Self";var c=e.state;delete c.err,delete c.error;return Object.assign({},{type:n,issuetype:e.state.issuetype,name:e.state.name,practitioner:e.state.practitioner,category:e.state.category,description:e.state.description.replace(/[,+()'"*<>{}]/g," "),severity:e.state.severity,createdDate:s+"-"+a+"-"+t.getFullYear()+" "+r+":"+i,recordId:e.state.recordId,section:e.state.section,sharedInfo:e.state.sharedInfo,createFor:e.state.createFor,ticketType:e.state.ticketType,email:e.props.user_details.userEmail,role:e.props.user_details.role,key:"Update",loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail})},e.handleWithdraw=function(t){e.props.actions.withdrawTicket({recordId:t,email:e.props.user_details.userEmail,role:e.props.user_details.role,loggedinUser:e.props.user_details.username}),e.setState({spinnerFlag:!0}),setTimeout((function(){e.props.withdrawResponse&&200===e.props.withdrawResponse.status&&"Withdraw"===e.props.withdrawResponse.data.message?(e.setState({error:"Ticket Withdrawn Successfully",err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.Reset(),e.props.actions.withdrawTicketMail(e.incidentObj())):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),5e3)},e.handleSubcategory=function(t){var s,a=e.state.issuetype;e.state.types&&e.state.types.forEach((function(e){e.name===a&&e.ticketType&&e.ticketType.forEach((function(e){e.section===t&&(s=e.type)}))})),e.setState({section:t,types_of_ticket:s,ticketType:""})},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllIssues({email:this.props.user_details.userEmail,role:this.props.user_details.role,data:"mylog"}),this.setState({mainspinnerFlag:!0}),this.props.actions.getAllIssueTypes()}},{key:"componentDidUpdate",value:function(e){if(e.allIssues!==this.props.allIssues)if(this.props.allIssues){var t=new Date,s=0,a=0,r=0;this.props.allIssues.sort((function(e,t){return new Date(t.CREATED_DATE.substring(6,10)+"-"+t.CREATED_DATE.substring(3,6)+t.CREATED_DATE.substring(0,2)+" "+t.CREATED_DATE.substring(11,17))-new Date(e.CREATED_DATE.substring(6,10)+"-"+e.CREATED_DATE.substring(3,6)+e.CREATED_DATE.substring(0,2)+" "+e.CREATED_DATE.substring(11,17))})),this.props.allIssues&&this.props.allIssues.forEach((function(e){if(e.TAT){var n=e.CLOSE_DATE.substring(6,10)+"-"+e.CLOSE_DATE.substring(3,6)+e.CLOSE_DATE.substring(0,2),i=new Date(n);if("Closed"===e.STATUS)a+=1,Object.assign(e,{TAT:e.TAT});else{"Open"===e.STATUS?r+=1:"WIP"===e.STATUS&&(s+=1);var c=we(t,i);if(!(t>i))return c;c="+"+c,Object.assign(e,{TAT:c})}}})),this.setState({issueList:this.props.allIssues,responseflag:!0,mainspinnerFlag:!1,wipCount:s,openCount:r,closedCount:a})}else this.setState({issueList:[],responseflag:!0,mainspinnerFlag:!1});if(e.updateRecord!==this.props.updateRecord)if(0!==this.props.updateRecord.length){for(var n=0;n<this.props.updateRecord.length;n++)this.setState({ticketStatus:this.props.updateRecord[0].STATUS});this.setState({flag:!0,openIssues:this.props.updateRecord})}else 0===this.props.updateRecord.length&&this.setState({flag:!0,message:"No Response"});e.issueTypes!==this.props.issueTypes&&this.props.issueTypes&&0!==this.props.issueTypes.length&&this.setState({types:this.props.issueTypes})}},{key:"render",value:function(){var e=this,t={responsive:"scrollMaxHeight",selectableRows:!1,onRowClick:function(t,s){var a=s.dataIndex,r=e.state.issueList[a];e.props.actions.getUpdatedRecord({ticket:r.TICKET_NO}),e.setState({show:!0,flag:!1,name:r.NAME,practitioner:r.PRACTIONER,issuetype:r.ISSUE_TYPE,createdDate:r.CREATED_DATE,description:r.DESCRIPTION,recordId:r.TICKET_NO,severity:r.SEVERITY,category:r.CATEGORY,section:r.SECTION,planned_close_date:r.CLOSE_DATE,planned_tat:r.TAT,sharedInfo:r.SHARED_TICKET,ticketType:r.TICKET_TYPE,owner:r.OWNER,createFor:r.CREATED_FOR})},textLabels:{body:{noMatch:"Sorry, no matching records found",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return Object(S.jsxs)("div",{className:"container-fluid Table",children:[Object(S.jsxs)("div",{className:"row rowClass",children:[Object(S.jsxs)("div",{className:"col-sm-2 col-md-2 colText",children:["Total Records : ",this.state.issueList&&this.state.issueList.length>0?this.state.issueList.length:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-new colText",children:["New :",this.state.issueList&&this.state.issueList.length>0?parseInt(this.state.issueList.length)-(parseInt(this.state.openCount)+parseInt(this.state.wipCount)+parseInt(this.state.closedCount)):0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-open colText",children:["Open : ",this.state.issueList&&this.state.issueList.length>0?this.state.openCount:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-wip colText",children:["WIP : ",this.state.issueList&&this.state.issueList.length>0?this.state.wipCount:0]}),Object(S.jsxs)("div",{className:" col-sm-2 col-md-2 text-closed colText",children:["Closed : ",this.state.issueList&&this.state.issueList.length>0?this.state.closedCount:0]})]}),!1===this.state.mainspinnerFlag&&!0===this.state.responseflag?Object(S.jsx)(Te.a,{title:this.state.title,data:this.state.issueList,columns:_e,options:t}):Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsxs)(Se.a,{show:this.state.show,onHide:function(t){return e.handleClose()},dialogClassName:"modal-record",size:"lg",children:[Object(S.jsx)(Se.a.Header,{style:{borderBottom:"5px #0c5bac solid",color:"#0c5bac"},closeButton:!0,children:Object(S.jsxs)(Se.a.Title,{className:"modal-title",children:[Object(S.jsxs)("span",{children:["Created Date & Time : ",this.state.createdDate]}),Object(S.jsxs)("span",{className:"modal-secondtit",children:["Ticket No : ",this.state.recordId]})]})}),Object(S.jsxs)(Se.a.Body,{className:"modal_body",children:["Edit"!==this.state.btnval?Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised By"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.name,type:"text"})})]}),this.state.name!==this.state.practitioner&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised For"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",value:this.state.practitioner,readOnly:!0,type:"text"})})]}),void 0!==this.state.sharedInfo&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Share Ticket Info"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",readOnly:!0,value:this.state.sharedInfo})})]}),Object(S.jsxs)("div",{className:"row",children:[this.state.name!==this.state.practitioner?Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Priority Category"})})}):Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Impact Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",value:this.state.severity,readOnly:!0})})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.issuetype,readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.section,readOnly:!0})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control mb-2",value:this.state.ticketType,readOnly:!0})})]})]})]}),Object(S.jsx)("div",{className:"row mt-2",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description Of The Issue"})}),Object(S.jsx)("textarea",{className:"form-control",value:this.state.description,readOnly:!0,type:"text",rows:"6"})]})})]}):Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised By"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},type:"text"})})]}),this.state.name!==this.state.practitioner&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Raised For"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.practitioner,onChange:function(t){return e.setState({practitioner:t.target.value})},type:"text"})})]}),void 0!==this.state.sharedInfo&&Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Share Ticket Info"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsx)("input",{className:"form-control",value:this.state.sharedInfo,onChange:function(t){return e.setState({sharedInfo:t.target.value})}})})]}),Object(S.jsxs)("div",{className:"row",children:[this.state.name!==this.state.practitioner?Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Priority Category"})})}):Object(S.jsx)("div",{className:"col-sm-6 col-md-3 pb-2 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Impact Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control",value:this.state.severity,onChange:function(t){return e.setState({severity:t.target.value})},children:[Object(S.jsx)("option",{}),Object(S.jsxs)("option",{children:["High ","(greater than 21 Employees)"," "]}),Object(S.jsxs)("option",{children:["Medium ","(greater than 6 - less than 20 Employees)"]}),Object(S.jsxs)("option",{children:["Low ","(less than 5 Employees)"]})]})})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.issuetype,onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types&&this.state.types.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.sections&&0!==this.state.sections.length&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.section,onChange:function(t){return e.handleSubcategory(t.target.value)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.sections&&this.state.sections.map((function(e,t){return Object(S.jsx)("option",{children:e},t)}))]})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(S.jsx)("label",{className:"pt-2 pl-3",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-8",children:Object(S.jsxs)("select",{className:"form-control mb-2",value:this.state.ticketType,onChange:function(t){return e.setState({ticketType:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types_of_ticket&&this.state.types_of_ticket.map((function(e,t){return Object(S.jsx)("option",{children:e},t)}))]})})]})]})]})]}),Object(S.jsx)("div",{className:"row mt-2",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description"})}),Object(S.jsx)("textarea",{className:"form-control",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},type:"text",rows:"6"})]})})]}),0===this.props.updateRecord.length&&!0===this.state.flag&&""===this.state.btnval&&Object(S.jsxs)("div",{className:"buttons-submit",children:[Object(S.jsx)("button",{type:"button",className:"btn m-3 issue-btu",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleEdit()},children:"Edit"}),Object(S.jsx)("button",{type:"button",className:"btn m-3 issue-btu",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleWithdraw(e.state.recordId)},children:"Delete"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]}),"Edit"!==this.state.btnval&&Object(S.jsx)("h6",{className:"text-center m-3",children:"TICKET TRAIL"}),this.state.openIssues&&0!==this.state.openIssues.length&&!0===this.state.flag&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row rowheader",children:[Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Responded Date & Time"}),Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Stage Name"}),Object(S.jsx)("div",{className:"col-sm col-md tableheader text-center",children:"Status"})]}),Object(S.jsx)("div",{id:"accordion",children:0!==this.state.openIssues.length&&this.state.openIssues.map((function(t,s){var a="#collapse-"+s,r="collapse-"+s;return Object(S.jsxs)("div",{className:"card issue-accordion",children:[Object(S.jsx)("div",{className:"card-header",id:"heading-1","data-toggle":"collapse","data-target":a,"aria-expanded":"true","aria-controls":r,children:Object(S.jsxs)("div",{className:"row cardhead",children:[Object(S.jsx)("div",{className:"col-sm col-md text-center",children:t.RESPONSE_DATE}),Object(S.jsxs)("div",{className:"col-sm col-md text-center",children:[t.STAGE_NAME," "]}),Object(S.jsxs)("div",{className:"col-sm col-md text-center",children:[Object(S.jsx)("span",{style:{color:"Open"===t.STATUS?"#FF8533":"Closed"===t.STATUS?"green":"New"===t.STATUS?"#D74D4D":"WIP"===t.STATUS?"#004D99":"white"},children:t.STATUS})," "]})]})}),Object(S.jsx)("div",{id:r,className:"collapse","data-parent":"#accordion","aria-labelledby":"heading-1",children:Object(S.jsx)("div",{id:"accordion-1",children:Object(S.jsx)("div",{className:"card-body  table-responsive",id:"heading-1-1",children:Object(S.jsxs)("div",{className:"row mt-4",children:["User"!==t.STAGE_NAME?Object(S.jsx)("div",{className:"col-sm-5 col-md-6",children:"Incident"===e.state.accountreporting?Object(S.jsxs)("div",{className:"col-sm-5 col-md-12",children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:" IBM Comments/Action "})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("textarea",{className:"form-control mb-2",value:t.ACTION,readOnly:!0,type:"text",rows:"4"})})]}),Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"IBM Comments/PreventionPlan"})})}),Object(S.jsx)("div",{className:"col-sm-4 col-md-7",children:Object(S.jsx)("textarea",{className:"form-control mb-2",value:t.PLAN,type:"text",readOnly:!0,rows:"4"})})]})]}):Object(S.jsxs)("div",{className:"col-sm-5 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Response "})}),Object(S.jsx)("textarea",{className:"form-control",value:t.RESPONSE,readOnly:!0,type:"text",rows:"6"})]})}):Object(S.jsxs)("div",{className:"col-sm-5 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Response "})}),Object(S.jsx)("textarea",{className:"form-control",value:t.RESPONSE,readOnly:!0,type:"text",rows:"6"})]}),Object(S.jsxs)("div",{className:"col-sm-5 col-md-5",children:[Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Planned Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:t.CLOSE_DATE.split(" ",1),readOnly:!0,type:"text"})})]}),"undefined"!==t.ACTUAL_CLOSE_DATE&&null!==t.ACTUAL_CLOSE_DATE&&Object(S.jsxs)("div",{className:"row mb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-5 mt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Actual Closure Date"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-7",children:Object(S.jsx)("input",{className:"form-control mb-2",value:t.ACTUAL_CLOSE_DATE,readOnly:!0,type:"text"})})]})]})]})})})})]})}))}),!1===this.state.reply&&"Closed"!==this.state.ticketStatus&&Object(S.jsxs)("div",{className:"buttons-submit",children:[Object(S.jsx)("button",{className:"btn issue-btu m-3",onClick:function(t){return e.setState({reply:!0})},children:"Reply"}),Object(S.jsxs)("button",{className:"btn issue-btu m-3",onClick:function(t){return e.handleWithdraw(e.state.recordId)},children:["Withdraw\xa0",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})]}),!0===this.state.reply&&Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12 mt-2",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Reply"})}),Object(S.jsx)("textarea",{className:"form-control",value:this.state.userResponse,rows:"4",onChange:function(t){return e.setState({userResponse:t.target.value})}})]})})]}),!1===this.state.flag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),0===this.props.updateRecord.length&&!0===this.state.flag&&"Edit"!==this.state.btnval&&Object(S.jsx)("h6",{className:"text-center",children:this.state.message})]}),!0===this.state.reply&&Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleReply()},children:"Reply"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinnerClass text-center",children:Object(S.jsx)(oe.a,{})})]}),"Edit"===this.state.btnval&&Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsxs)("button",{type:"button",className:"btn m-3 issue-btu",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleSubmit()},children:["Submit",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]}),Object(S.jsx)("button",{type:"button",className:"btn m-3 issue-btu",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.setState({btnval:""})},children:"Back"})]})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})]})}}]),s}(a.Component),Ue=Object(o.b)((function(e){return{allIssues:e.page.allIssues,updateResult:e.page.updateResult,user_details:e.user.user_details,updateRecord:e.page.updateRecord,issueTypes:e.page.issueTypes,editResponse:e.page.editResponse,withdrawResponse:e.page.withdrawResponse,allUsers:e.page.allUsers}}),(function(e){return{actions:Object(l.b)({getAllIssues:v.getAllIssues,updateIssue:v.updateIssue,getUpdatedRecord:v.getUpdatedRecord,getAllIssueTypes:v.getAllIssueTypes,editTicket:v.editTicket,withdrawTicket:v.withdrawTicket,replyMail:v.replyMail,mailToUser:v.mailToUser,mailToSME:v.mailToSME,getAllUsers:v.getAllUsers,withdrawTicketMail:v.withdrawTicketMail},e)}}))(Re),Le=s(251),Me=s.n(Le),Pe=s(327),Fe=s(144),Be=s.n(Fe),We=s(243),Ge=s(185),Ye=s(329),He=s(349),ze=s(25),Ke=s.n(ze),qe=["Super Admin","Admin","Backend Support","SME","User","Super User"],Ve=["America","China","Europe","India","Philippines","All"],Je=[{name:"EMP_NAME",label:"Name",options:{filter:!0,sort:!0}},{name:"STAGE_NAME",label:"Stage Name",options:{filter:!0,sort:!0}},{name:"EMP_EMAIL",label:"Email-Id",options:{filter:!0,sort:!0}},{name:"ROLE",label:"Role",options:{filter:!0,sort:!0}},{name:"ISSUE_TYPE",label:"Category",options:{filter:!0,sort:!0}},{name:"ISSUE_CATEGORY",label:"Portals & Dashboard",options:{filter:!0,sort:!0}}],Qe=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={show:!1,username:"",userEmail:"",UID:"",role:"",empId:"",error:"",err:!1,spinnerFlag:!1,stagename:"",categoryType:[],issueType:[],sections:[],flag:!1,array:[],update:"",types:[],geography:"",issueTypes:[]},e.handleAdduser=function(){e.setState({show:!0})},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),3500)},e.handleAdd=function(){""===e.state.userEmail||""===e.state.role?(e.setState({error:"All Fields Are Mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.state.userEmail.includes("@")?e.state.userEmail.includes(".ibm.com")?"SME"===e.state.role?""===e.state.stagename?(e.setState({error:"Stage name sholud not be empty",err:!0,iconColor:"text-danger"}),e.error()):0===e.state.issueType.length?(e.setState({error:"Please Choose Category",err:!0,iconColor:"text-danger"}),e.error()):0===e.state.categoryType.length?(e.setState({error:"Please Choose Sub-Category",err:!0,iconColor:"text-danger"}),e.error()):e.check():"Super User"===e.state.role?""===e.state.stagename?(e.setState({error:"Stage name sholud not be empty",err:!0,iconColor:"text-danger"}),e.error()):0===e.state.issueType.length?(e.setState({error:"Please Choose Category",err:!0,iconColor:"text-danger"}),e.error()):e.check():e.check():(e.setState({error:"Mail Should Include .ibm.com",err:!0,iconColor:"text-danger"}),e.error()):(e.setState({error:"Mail Should Include @",err:!0,iconColor:"text-danger"}),e.error())},e.handleClose=function(){e.setState({show:!1}),e.handleReset()},e.getUserName=function(t){Ke.a.post("/api/v1/getUserName",{email:t}).then((function(t){200===t.status&&!0===t.data.status?e.setState({username:t.data.name}):e.setState({username:""})})).catch((function(t){e.setState({username:""})}))},e.handleReset=function(){e.setState({show:!1,username:"",userEmail:"",UID:"",role:"",empId:"",error:"",err:!1,spinnerFlag:!1,stagename:"",categoryType:[],issueType:[],sections:[],flag:!1,update:""})},e.handleRole=function(t){if(e.setState({role:t.target.value}),"SME"!==t.target.value)e.setState({stagename:"",issueType:[],categoryType:[]});else{var s=e.state.userEmail.split("@",1);e.setState({stagename:s})}},e.handleUpdate=function(){""===e.state.username||""===e.state.userEmail||""===e.state.role?(e.setState({error:"All Fields Are Mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.state.userEmail.includes("@")?e.state.userEmail.includes(".ibm.com")?"SME"===e.state.role?0===e.state.issueType.length||""===e.state.stagename?(e.setState({error:"All Fields Are Mandatory",err:!0,iconColor:"text-danger"}),e.error()):0===e.state.categoryType.length?(e.setState({error:"Please Choose Sub-Category",err:!0,iconColor:"text-danger"}),e.error()):e.checkForUpdate():e.checkForUpdate():(e.setState({error:"Mail Should Include .ibm.com",err:!0,iconColor:"text-danger"}),e.error()):(e.setState({error:"Mail Should Include @",err:!0,iconColor:"text-danger"}),e.error())},e.Reset=function(){setTimeout((function(){e.handleReset()}),1e3)},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllUsers(),this.props.actions.getAllIssueTypes()}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.issueTypes!==this.props.issueTypes){var s=[];"Super Admin"===this.props.user_details.role&&this.props.issueTypes&&0!==this.props.issueTypes.length?(this.props.issueTypes.forEach((function(e){s.push(e.name)})),this.setState({types:s})):"Super User"===this.props.user_details.role&&this.props.issueTypes&&0!==this.props.issueTypes.length&&(s=this.props.issueTypes.filter((function(e){return t.props.user_details.details[0].ISSUE_TYPE.includes(e.name)})).map((function(e){return e.name})),this.setState({types:s}))}}},{key:"check",value:function(){var e=this,t=[];this.setState({spinnerFlag:!0});for(var s={UID:Math.floor(1e4*Math.random())+1e3,EMP_ID:this.state.empId,EMP_NAME:this.state.username,ROLE:this.state.role,EMP_EMAIL:this.state.userEmail.toLowerCase(),STAGE_NAME:this.state.stagename,ISSUE_TYPE:this.state.issueType.join(","),ISSUE_CATEGORY:this.state.categoryType.join(","),loggedinUser:this.props.user_details.username,loggedinEmail:this.props.user_details.userEmail},a=0;a<this.props.allUsers.length;a++)this.props.allUsers[a].EMP_EMAIL===this.state.userEmail?(this.setState({err:!0,error:"User already exists",iconColor:"text-danger",spinnerFlag:!1}),this.error()):(t.push(a),this.props.allUsers.length===t.length&&(this.props.actions.addUser(s),setTimeout((function(){200===e.props.userRes.status?(e.setState({show:!1,spinnerFlag:!1,err:!0,error:"Record Submitted",username:"",userEmail:"",empId:"",role:"",categoryType:[],issueType:[],iconColor:"text-success"}),e.error()):(e.setState({show:!1,spinnerFlag:!1,err:!0,error:"Please Try Again, or Contact System Adminstrator!",iconColor:"text-danger"}),e.error())}),5e3)))}},{key:"checkForUpdate",value:function(){var e=this;this.setState({spinnerFlag:!0});var t=this.state.sections.filter((function(t){return e.state.categoryType.includes(t)})),s={};Object.assign(s,{UID:this.state.UID,EMP_ID:this.state.empId,EMP_NAME:this.state.username,ROLE:this.state.role,EMP_EMAIL:this.state.userEmail.toLowerCase(),STAGE_NAME:this.state.stagename,ISSUE_TYPE:this.state.issueType.join(","),ISSUE_CATEGORY:t.join(","),loggedinUser:this.props.user_details.username,loggedinEmail:this.props.user_details.userEmail}),this.props.actions.updateUser(s),setTimeout((function(){200===e.props.updateuserRes.status?(e.setState({show:!1,spinnerFlag:!1,err:!0,error:"User Record Updated",username:"",userEmail:"",empId:"",role:"",categoryType:[],issueType:[],iconColor:"text-success"}),e.error(),e.Reset()):(e.setState({spinnerFlag:!1,show:!1,err:!0,error:"Please Try Again, or Contact System Adminstrator!",iconColor:"text-danger"}),e.error())}),5e3)}},{key:"handleChangeType",value:function(e){var t=[],s=e.target.value;"Super User"!==this.state.role&&this.props.issueTypes&&this.props.issueTypes.forEach((function(e){for(var a=0;a<s.length;a++)if(e.name===s[a]){var r=e.section;r&&r.forEach((function(e){t.push(e)}))}})),this.setState({issueType:e.target.value,sections:t})}},{key:"render",value:function(){var e=this,t={responsive:"scroll",selectableRows:"Single",customToolbar:function(){return Object(S.jsx)(Pe.a,{title:"Add User",children:Object(S.jsx)(W.a,{className:"addicon",onClick:function(t){return e.handleAdduser()},children:Object(S.jsx)(Be.a,{})})})},onRowClick:function(t,s){var a=s.dataIndex,r=e.props.allUsers[a];e.setState({show:!0,flag:!0,UID:r.UID,username:r.EMP_NAME,userEmail:r.EMP_EMAIL,role:r.ROLE,empId:r.EMP_ID,stagename:r.STAGE_NAME,update:"update"}),console.log(r);var n,i=null!==r.ISSUE_TYPE&&r.ISSUE_TYPE.length>0?r.ISSUE_TYPE.split(","):[],c=[];e.props.issueTypes&&e.props.issueTypes.forEach((function(e){for(var t=0;t<i.length;t++)if(e.name===i[t]){var s=e.section;s&&s.forEach((function(e){c.push(e)})),n=null!==r.ISSUE_CATEGORY?r.ISSUE_CATEGORY.split(","):[]}void 0===n&&(n=[])})),e.setState({issueType:i,sections:c,categoryType:n})},onRowsDelete:function(t){var s=e.props.allUsers[t.data[0].dataIndex].UID;e.props.actions.deleteUser({mail:s,loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail,id:e.props.allUsers[t.data[0].dataIndex].EMP_EMAIL}),setTimeout((function(){200===e.props.deleteRes.status?(e.setState({show:!1,spinnerFlag:!1,err:!0,error:"Record Deleted",iconColor:"text-success"}),e.error()):(e.setState({show:!1,err:!0,error:"Please Try Again, or Contact System Adminstrator!",iconColor:"text-danger"}),e.error())}),4e3)},textLabels:{body:{noMatch:"Sorry, no matching records found",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}}};return Object(S.jsxs)("div",{className:"container-fluid Table",children:[this.props.allUsers&&0!==this.props.allUsers.lenght?Object(S.jsx)(Te.a,{title:"Users List",data:this.props.allUsers,columns:Je,options:t}):Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsxs)(Se.a,{show:this.state.show,onHide:function(t){return e.handleClose()},dialogClassName:"modal-user",size:"lg",children:[Object(S.jsx)(Se.a.Header,{style:{borderBottom:"5px #0c5bac solid",color:"#0c5bac"},closeButton:!0,children:Object(S.jsx)(Se.a.Title,{children:!1===this.state.flag?"Add User":"Update User"})}),Object(S.jsx)(Se.a.Body,{children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-1 col-md-1"}),Object(S.jsxs)("div",{className:"col-sm-11 col-md-10 text-center",children:[Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Employee Mail ID:"})})}),"update"===this.state.update?Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)("input",{type:"email",className:"form-control","aria-describedby":"emailHelp",value:this.state.userEmail,readOnly:!0})}):Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)("input",{type:"email",className:"form-control","aria-describedby":"emailHelp",value:this.state.userEmail,onChange:function(t){e.setState({userEmail:t.target.value}),setTimeout((function(){e.getUserName(e.state.userEmail)}),3e3)}})})]}),""!==this.state.username&&Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Employee Name:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)("input",{className:"form-control",value:this.state.username,disabled:!0})})]}),Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Role:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsxs)("select",{className:"form-control",value:this.state.role,onChange:function(t){return e.handleRole(t)},children:[Object(S.jsx)("option",{}),qe&&qe.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Geography:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsxs)("select",{className:"form-control",value:this.state.geography,onChange:function(t){return e.setState({geography:t.target.value})},children:[Object(S.jsx)("option",{}),Ve&&Ve.sort().map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),("SME"===this.state.role||"Super User"===this.state.role)&&Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Stage Name:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)("input",{className:"form-control",value:this.state.stagename,onChange:function(t){return e.setState({stagename:t.target.value})}})})]}),"SME"===this.state.role&&this.state.types&&0!==this.state.types.length&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Category:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)(We.a,{multiple:!0,className:"form-control",name:"acc_name",value:this.state.issueType,onChange:function(t){return e.handleChangeType(t)},input:Object(S.jsx)(Ge.a,{disableUnderline:!0}),renderValue:function(e){return e.join(", ")},children:this.state.types&&this.state.types.map((function(t){return Object(S.jsxs)(Ye.a,{value:t,children:[Object(S.jsx)(He.a,{checked:e.state.issueType.indexOf(t)>-1}),Object(S.jsx)(J.a,{primary:t})]},t)}))})})]}),this.state.sections&&0!==this.state.sections.length&&Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Portals & Dashboard:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)(We.a,{multiple:!0,className:"form-control",name:"acc_name",value:this.state.categoryType,onChange:function(t){return e.setState({categoryType:t.target.value})},input:Object(S.jsx)(Ge.a,{disableUnderline:!0}),renderValue:function(e){return e.join(", ")},children:this.state.sections&&this.state.sections.map((function(t){return Object(S.jsxs)(Ye.a,{value:t,children:[Object(S.jsx)(He.a,{checked:e.state.categoryType.indexOf(t)>-1}),Object(S.jsx)(J.a,{primary:t})]},t)}))})})]})]}),"Super User"===this.state.role&&this.state.types&&0!==this.state.types.length&&Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"row m-2",children:[Object(S.jsx)("div",{className:"col-sm-12 col-md-4 pt-2",children:Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Category:"})})}),Object(S.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(S.jsx)(We.a,{multiple:!0,className:"form-control",name:"acc_name",value:this.state.issueType,onChange:function(t){return e.handleChangeType(t)},input:Object(S.jsx)(Ge.a,{disableUnderline:!0}),renderValue:function(e){return e.join(", ")},children:this.state.types&&this.state.types.map((function(t){return Object(S.jsxs)(Ye.a,{value:t,children:[Object(S.jsx)(He.a,{checked:e.state.issueType.indexOf(t)>-1}),Object(S.jsx)(J.a,{primary:t})]},t)}))})})]})})]})]})}),!1===this.state.flag?Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn ",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleAdd()},children:"Add"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]}):Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)("button",{type:"button",className:"btn ",style:{backgroundColor:"#0c5bac",color:"#fff"},onClick:function(t){return e.handleUpdate()},children:"Update"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})]})}}]),s}(a.Component),Xe=Object(o.b)((function(e){return{allUsers:e.page.allUsers,userRes:e.page.userRes,deleteRes:e.page.deleteRes,user_details:e.user.user_details,issueTypes:e.page.issueTypes,updateuserRes:e.page.updateuserRes}}),(function(e){return{actions:Object(l.b)({getAllUsers:v.getAllUsers,addUser:v.addUser,deleteUser:v.deleteUser,getAllIssueTypes:v.getAllIssueTypes,updateUser:v.updateUser},e)}}))(Qe),Ze=s(368),$e=s.n(Ze),et=s(252),tt=s.n(et),st=(s(336),s.p+"static/media/ibm.e94aa12b.png"),at=function(){return Object(S.jsxs)("div",{className:"footer",children:[Object(S.jsx)("img",{src:st,alt:"ibm-logo",className:"ibm-footer-image"}),Object(S.jsx)("footer",{className:"footer-text",children:Object(S.jsxs)("span",{className:"",children:["\xa9 ",(new Date).getFullYear()," Pioneered By CPSD"]})})]})},rt=s(363),nt=s.n(rt),it=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={issueType:"",newCategory:"",newIssue:"",prevIssue:"",prevaddCategory:"",prevCategory:"",existCategory:"",allprevIssue:"",err:!1,error:"",updateCategory:"",ticketType:"",existsubCategory:"",newsubCategory:"",newticketType:"",existticketType:"",ticket_type:[]},e.error=function(){setTimeout((function(){e.setState({err:!1,error:""})}),3500)},e.handleSubCategory=function(t){var s;e.state.allprevIssue&&e.state.allprevIssue.forEach((function(e){for(var a=0;a<e.ticketType.length;a++)e.ticketType[a].section===t&&(s=e.ticketType[a].type)})),e.setState({existsubCategory:t,ticket_type:s,existticketType:"",newticketType:""})},e.handleAdd=function(t){if("Add"===t)""===e.state.newIssue||""===e.state.newCategory||""===e.state.ticketType?(e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.curdOperations(e.state.newIssue,e.state.newCategory,e.state.ticketType,"Add");else if("Add Sub-Category"===t)""===e.state.prevIssue||""===e.state.prevaddCategory||""===e.state.ticketType?(e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.curdOperations(e.state.prevIssue,e.state.prevaddCategory,e.state.ticketType,"Add Sub-Category");else if("Update Category"===t)""===e.state.prevIssue||""===e.state.updateCategory?(e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.curdOperations(e.state.prevIssue,e.state.updateCategory,"","Update Category");else if("Update Sub-Category"===t)if(""===e.state.prevIssue||""===e.state.existsubCategory||""===e.state.newsubCategory)e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error();else{e.setState({spinnerFlag:!0});var s={};Object.assign(s,{cat:e.state.prevIssue,sub_cat:e.state.existsubCategory,new_sub_cat:e.state.newsubCategory,val:"Update Sub-Category",loggedinUser:e.props.user_details.username,email:e.props.user_details.userEmail}),e.updateIssues(s)}else if("Update Ticket Type"===t)if(""===e.state.prevIssue||""===e.state.existsubCategory||""===e.state.existticketType||""===e.state.newticketType)e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error();else{e.setState({spinnerFlag:!0});var a={};Object.assign(a,{cat:e.state.prevIssue,sub_cat:e.state.existsubCategory,ticket_type:e.state.existticketType,new_ticket_type:e.state.newticketType,val:"Update Ticket Type",loggedinUser:e.props.user_details.username,email:e.props.user_details.userEmail}),e.updateIssues(a)}else"Add Ticket Type"===t&&(""===e.state.prevIssue||""===e.state.existCategory||""===e.state.ticketType?(e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.curdOperations(e.state.prevIssue,e.state.existCategory,e.state.ticketType,"Add Ticket Type"))},e.updateIssues=function(t){e.props.actions.addIssue(t),setTimeout((function(){200===e.props.addIssueData.status?(e.setState({error:e.props.addIssueData.data.message,err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),8e3)},e.curdOperations=function(t,s,a,r){e.setState({spinnerFlag:!0});var n={};Object.assign(n,{issue:t,category:s,ticketType:a,val:r,email:e.props.user_details.userEmail,loggedinUser:e.props.user_details.username}),e.props.actions.addIssue(n),setTimeout((function(){200===e.props.addIssueData.status?(e.setState({error:e.props.addIssueData.data.message,err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),8e3)},e.Reset=function(){setTimeout((function(){e.handleReset()}),1e3)},e.handleReset=function(){e.setState({issueType:"",newCategory:"",newIssue:"",prevIssue:"",prevaddCategory:"",prevCategory:"",existCategory:"",updateCategory:"",ticketType:"",existsubCategory:"",newsubCategory:"",newticketType:"",existticketType:"",ticket_type:[]})},e.handleDelete=function(t){"Delete Category"===t?""===e.state.prevIssue?(e.setState({error:"Please selete Category",err:!0,iconColor:"text-danger"}),e.error()):e.Delete(e.state.prevIssue,"","issue"):"Delete Sub-Category"===t&&(""===e.state.prevIssue||""===e.state.existCategory?(e.setState({error:"All fileds are mandatory",err:!0,iconColor:"text-danger"}),e.error()):e.Delete(e.state.prevIssue,e.state.existCategory,""))},e.Delete=function(t,s,a){var r={};Object.assign(r,{issue:t,category:s,type:a,email:e.props.user_details.userEmail,loggedinUser:e.props.user_details.username}),e.props.actions.deleteIssue(r),e.setState({spinnerFlag:!0}),setTimeout((function(){200===e.props.deleteIssue.status?(e.setState({error:"Issue Deleted",err:!0,iconColor:"text-success",spinnerFlag:!1}),e.error(),e.Reset()):(e.setState({show:!1,err:!0,error:"Something Went wrong",iconColor:"text-danger",spinnerFlag:!1}),e.error())}),8e3)},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllIssueTypes()}},{key:"componentDidUpdate",value:function(e,t){e.issueTypes!==this.props.issueTypes&&this.props.issueTypes&&0!==this.props.issueTypes.length&&this.setState({allprevIssue:this.props.issueTypes}),t.issueType!==this.state.issueType&&this.setState({newCategory:"",newIssue:"",prevIssue:"",prevaddCategory:"",prevCategory:"",existCategory:"",updateCategory:"",ticketType:"",existsubCategory:"",newsubCategory:"",newticketType:"",existticketType:"",ticket_type:[]})}},{key:"handleChangeType",value:function(e){var t;this.state.allprevIssue&&this.state.allprevIssue.forEach((function(s){s.name===e.target.value&&(t=s.section)})),this.setState({prevIssue:e.target.value,prevCategory:t,existsubCategory:"",newsubCategory:"",existticketType:"",newticketType:""})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container-fluid",children:[Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Adding Issue"}),Object(S.jsx)("div",{className:"card-body cardbody",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"",children:Object(S.jsx)("strong",{children:"Issue"})})}),Object(S.jsxs)("div",{className:"col-sm-6  col-md-11",children:[Object(S.jsxs)("label",{className:"radio pr-4",children:[Object(S.jsx)("input",{value:"Add",checked:"Add"===this.state.issueType,type:"radio",onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Add Category"]}),Object(S.jsxs)("label",{className:"radio  pr-4 issueType",children:[Object(S.jsx)("input",{type:"radio",value:"Add Sub-Category",checked:"Add Sub-Category"===this.state.issueType,onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Add Portals & Dashboard"]}),Object(S.jsxs)("label",{className:"radio  pr-4 issueType",children:[Object(S.jsx)("input",{type:"radio",value:"Add Ticket Type",checked:"Add Ticket Type"===this.state.issueType,onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Add Ticket Type"]}),Object(S.jsxs)("label",{className:"radio  pr-4 issueType",children:[Object(S.jsx)("input",{type:"radio",value:"Update Category",checked:"Update Category"===this.state.issueType,onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Update Category"]}),Object(S.jsxs)("label",{className:"radio  pr-4 issueType",children:[Object(S.jsx)("input",{type:"radio",value:"Update Sub-Category",checked:"Update Sub-Category"===this.state.issueType,onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Update Portals & Dashboard"]}),Object(S.jsxs)("label",{className:"radio  pr-4 issueType",children:[Object(S.jsx)("input",{type:"radio",value:"Update Ticket Type",checked:"Update Ticket Type"===this.state.issueType,onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Update Ticket Type"]}),Object(S.jsxs)("label",{className:"radio pr-4 issueType",children:[Object(S.jsx)("input",{value:"Delete Category",checked:"Delete Category"===this.state.issueType,type:"radio",onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Delete Category"]}),Object(S.jsxs)("label",{className:"radio",children:[Object(S.jsx)("input",{value:"Delete Sub-Category",checked:"Delete Sub-Category"===this.state.issueType,type:"radio",onChange:function(t){return e.setState({issueType:t.target.value})}}),"\xa0\xa0Delete Portals & Dashboard"]}),Object(S.jsx)("br",{})]})]}),"Add"===this.state.issueType&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("input",{value:this.state.newIssue,className:"form-control",onChange:function(t){return e.setState({newIssue:t.target.value})}})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsx)("input",{value:this.state.newCategory,className:"form-control",onChange:function(t){return e.setState({newCategory:t.target.value})}})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("input",{value:this.state.ticketType,className:"form-control",onChange:function(t){return e.setState({ticketType:t.target.value})}})})]})]}),"Add Sub-Category"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsx)("input",{value:this.state.prevaddCategory,className:"form-control",onChange:function(t){return e.setState({prevaddCategory:t.target.value})}})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("input",{value:this.state.ticketType,className:"form-control",onChange:function(t){return e.setState({ticketType:t.target.value})}})})]})]}),"Add Ticket Type"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.prevCategory&&0!==this.state.prevCategory.length&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsxs)("select",{value:this.state.existCategory,className:"form-control",onChange:function(t){return e.setState({existCategory:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.prevCategory&&this.state.prevCategory.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),this.state.existCategory&&""!==this.state.existCategory&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsx)("input",{value:this.state.ticketType,className:"form-control",onChange:function(t){return e.setState({ticketType:t.target.value})}})})]})]}),"Update Category"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Existing Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsx)("input",{value:this.state.updateCategory,className:"form-control",onChange:function(t){return e.setState({updateCategory:t.target.value})}})})]})]}),"Update Sub-Category"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.prevCategory&&0!==this.state.prevCategory.length&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsxs)("select",{value:this.state.existsubCategory,className:"form-control",onChange:function(t){return e.setState({existsubCategory:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.prevCategory&&this.state.prevCategory.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"New Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6  col-md-5",children:Object(S.jsx)("input",{value:this.state.newsubCategory,className:"form-control",onChange:function(t){return e.setState({newsubCategory:t.target.value})}})})]})]}),"Update Ticket Type"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.prevCategory&&0!==this.state.prevCategory.length&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsxs)("select",{value:this.state.existsubCategory,className:"form-control",onChange:function(t){return e.handleSubCategory(t.target.value)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.prevCategory&&this.state.prevCategory.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),this.state.ticket_type&&0!==this.state.ticket_type.lenght&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Existing Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6  col-md-5",children:Object(S.jsxs)("select",{value:this.state.existticketType,className:"form-control",onChange:function(t){return e.setState({existticketType:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.ticket_type&&this.state.ticket_type.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]}),Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-2",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"New Ticket Type"})})}),Object(S.jsx)("div",{className:"col-sm-6  col-md-5",children:Object(S.jsx)("input",{value:this.state.newticketType,className:"form-control",onChange:function(t){return e.setState({newticketType:t.target.value})}})})]})]}),"Delete Category"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]})}),"Delete Sub-Category"===this.state.issueType&&this.state.allprevIssue&&0!==this.state.allprevIssue.lenght&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Category"})})}),Object(S.jsx)("div",{className:"col-sm-6 col-md-5",children:Object(S.jsxs)("select",{value:this.state.prevIssue,className:"form-control",onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.allprevIssue&&this.state.allprevIssue.map((function(e){return Object(S.jsx)("option",{children:e.name},e.name)}))]})})]}),this.state.prevCategory&&0!==this.state.prevCategory.length&&Object(S.jsxs)("div",{className:"row pb-2",children:[Object(S.jsx)("div",{className:"col-sm-6 col-md-1",children:Object(S.jsx)("label",{className:"pt-2",children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})})}),Object(S.jsx)("div",{className:"col-sm-6   col-md-5",children:Object(S.jsxs)("select",{value:this.state.existCategory,className:"form-control",onChange:function(t){return e.setState({existCategory:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose From Dropdown"}),this.state.prevCategory&&this.state.prevCategory.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})})]})]})]})})}),"Add"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Add")},children:["Add",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Update Category"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Update Category")},children:["Update",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Update Sub-Category"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Update Sub-Category")},children:["Update",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Update Ticket Type"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Update Ticket Type")},children:["Update",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Add Sub-Category"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Add Sub-Category")},children:["Add",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Add Ticket Type"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleAdd("Add Ticket Type")},children:["Add",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Delete Category"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleDelete("Delete Category")},children:["Delete",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}),"Delete Sub-Category"===this.state.issueType&&Object(S.jsx)("div",{className:"card-footer createfooter",children:Object(S.jsxs)("button",{className:"btn btu-submit",onClick:function(t){return e.handleDelete("Delete Sub-Category")},children:["Delete",!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})]})})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})]})}}]),s}(a.Component),ct=Object(o.b)((function(e){return{issueTypes:e.page.issueTypes,addIssueData:e.page.addIssueData,deleteIssue:e.page.deleteIssue,user_details:e.user.user_details}}),(function(e){return{actions:Object(l.b)({getAllIssueTypes:v.getAllIssueTypes,addIssue:v.addIssue,deleteIssue:v.deleteIssue},e)}}))(it),ot=s(365),lt=s.n(ot),dt=s(253),ut=s.n(dt),pt=s(81),ht=s.n(pt),jt=s(115),mt=(s(445),s(248)),bt=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={selectedFile:"",response:"",show:"",spinnerFlag:"",selectedeSyncFile:"",err:!1,error:""},e.onChangeHandler=function(t){e.setState({selectedFile:t.target.files[0],loaded:0})},e.handleReset=function(){console.log("reset"),e.setState({response:"",show:"",spinnerFlag:"",selectedeSyncFile:"",err:!1,error:""})},e.onClickHandler=Object(jt.a)(ht.a.mark((function t(){var s,a,r;return ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({show:!0}),a=e.state.selectedFile,r=new FileReader,t.next=5,function(e){var t=e.target.result,a=mt.read(t,{type:"binary"}),r=a.SheetNames[0],n=a.Sheets[r];s=mt.utils.sheet_to_row_object_array(n,{defval:""})};case 5:r.onload=t.sent,setTimeout((function(){s&&0!==s.length&&e.props.actions.uploadExcel(s,{loggedinUser:e.props.user_details.username,email:e.props.user_details.userEmail})}),2e3),setTimeout((function(){e.props.excelData&&200===e.props.excelData.status&&(e.setState({response:e.props.excelData,show:!1,error:e.props.excelData.data.message,err:!0,iconColor:"text-success"}),setTimeout((function(){e.handleReset()}),2500))}),8e3),r.readAsBinaryString(a);case 9:case"end":return t.stop()}}),t)}))),e}return Object(O.a)(s,[{key:"render",value:function(){return Object(S.jsxs)("div",{className:"container-fluid",children:[Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col",children:Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Upload User list"}),Object(S.jsxs)("div",{className:"card-body cardbody text-center",children:[Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col",children:Object(S.jsxs)("span",{children:[Object(S.jsx)("input",{type:"file",name:"file",className:"btn upload",accept:".xlsx, .xls",onChange:this.onChangeHandler}),Object(S.jsx)("button",{className:"btn uploadBtn",onClick:this.onClickHandler,children:"Upload"})]})})})})}),!0===this.state.show&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})})}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.error})]})}}]),s}(a.Component),gt=Object(o.b)((function(e){return{excelData:e.page.excelData,eSyncData:e.page.eSyncData,user_details:e.user.user_details}}),(function(e){return{actions:Object(l.b)(v,e)}}))(bt),Ot=s(256),xt=function(e){var t=e.showModal,s=e.handleClose,a=e.handleLogout;e.remainingTime;return Object(S.jsxs)(Se.a,{show:t,onHide:s,className:"modal-idle",children:[Object(S.jsx)(Se.a.Header,{closeButton:!0,children:Object(S.jsx)(Se.a.Title,{children:"You Have Been Idle!"})}),Object(S.jsx)(Se.a.Body,{children:"You Will Get Timed Out. You want to stay?"}),Object(S.jsxs)(Se.a.Footer,{children:[Object(S.jsx)(Ot.a,{variant:"danger",onClick:a,children:"Logout"}),Object(S.jsx)(Ot.a,{className:"btn btu-submit",onClick:s,children:"Stay"})]})]})},ft=s(360),yt=s(197),vt=(s(232),["Bug Fix","Maintenance","DB Downtime","Application Downtime"]),Nt=["America","China","Europe","India","Philippines","All"],Tt=["SME","Country Lead","DPE","Domain Lead","Geo Lead","Geo Practice Lead","Global Delivery Lead","Global Practice Lead","PE","Squad Lead","Squad Member","Super Admin","Super User","Tribe Lead"],St=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={types:[],sections:[],category:"",subCategory:"",reason:"",description:"",err:!1,errorMsg:"",iconColor:"",spinnerFlag:!1,propsSec:[],audience:"",audienceArr:[],emailids:"",geography:"",sendAs:"email_slack",selectedFile:[],fileLoading:!1},e.fetchRoleUsers=function(e){return e.map((function(e){return e.ROLE})).filter((function(e,t,s){return s.indexOf(e)===t}))},e.fetchCategory=function(t){var s=[];return"Super Admin"!==e.props.user_details.role&&"Super User"!==e.props.user_details.role||(s=t.map((function(e){return e.name})).filter((function(e,t,s){return s.indexOf(e)===t}))),s},e.handleChangeType=function(t){var s,a=[];a=e.props.issueTypes&&e.props.issueTypes.filter((function(e){return e.name===t.target.value})).map((function(e){return e.section})),"SME"===e.props.user_details.role?(s=a[0].filter((function(t){return e.state.propsSec.includes(t)})),e.setState({category:t.target.value,sections:s,subCategory:""})):e.setState({category:t.target.value,sections:a[0],subCategory:"",audience:""}),"Insights 360"===t.target.value?e.setState({audienceArr:Tt}):e.setState({audienceArr:[]})},e.SubCategory=function(t){var s=t.target.value;e.setState({subCategory:s,audience:""})},e.sendMail=function(){if(""===e.state.category||""===e.state.reason||""===e.state.audience||""===e.state.description||""===e.state.geography)e.setState({err:!0,errorMsg:"Please fill all fields",iconColor:"text-danger"}),e.error();else if("Others"!==e.state.category&&""===e.state.subCategory)e.setState({err:!0,errorMsg:"Please choose Sub-Category",iconColor:"text-danger"}),e.error();else if("Manual"===e.state.audience&&""===e.state.emailids)e.setState({err:!0,errorMsg:"Please enter mail ids",iconColor:"text-danger"}),e.error();else if("Manual"!==e.state.audience||e.state.emailids.includes("@"))if("Manual"!==e.state.audience||e.state.emailids.includes(".ibm.com")){e.setState({spinnerFlag:!0});var t=[],s="";""!==e.state.emailids?(t=e.state.emailids.replace(/\s\s*/g,"").split(","),s="in"):(s="not_in",t=[]);var a=Object.assign({},{category:e.state.category,subCategory:e.state.subCategory,reason:e.state.reason,description:e.state.description.replace(/[,+()'"*<>{}]/g,"  "),geography:e.state.geography,userList:t.length>0?t:[],audience:e.state.audience,user:e.props.user_details.userEmail,loggedinUser:e.props.user_details.username,loggedinEmail:e.props.user_details.userEmail,type:s,selectedFile:e.state.selectedFile});"email"===e.state.sendAs?e.props.actions.notificationMail(a):"slack"===e.state.sendAs?e.props.actions.slackNotification(a):"email_slack"===e.state.sendAs&&(e.props.actions.notificationMail(a),e.props.actions.slackNotification(a)),setTimeout((function(){e.props.notification&&200===e.props.notification.status&&"send"===e.props.notification.data.data?(e.setState({err:!0,errorMsg:"Notification sent successfully",iconColor:"text-success",spinnerFlag:!1,emailids:""}),e.error(),e.handleReset()):(e.setState({err:!0,errorMsg:"Something went wrong",iconColor:"text-danger",spinnerFlag:!1,emailids:""}),e.error())}),5e3)}else e.setState({err:!0,errorMsg:"Mail should includes 'ibm.com'",iconColor:"text-danger"}),e.error();else e.setState({err:!0,errorMsg:"Mail should includes '@'",iconColor:"text-danger"}),e.error()},e.handleReset=function(){e.setState({category:"",subCategory:"",reason:"",description:"",spinnerFlag:!1,audience:"",emailids:"",sections:"",audienceArr:[],geography:"",sendAs:"email_slack",selectedFile:[],fileLoading:!1}),e.inputRef.current.value=""},e.error=function(){setTimeout((function(){e.setState({err:!1,errorMsg:"",iconColor:""})}),3300)},e.handleAudience=function(t){var s=t;e.setState({audience:s,emailids:""})},e.onFileChange=function(){var t=Object(jt.a)(ht.a.mark((function t(s){var a;return ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.values(s.target.files),e.setState({fileLoading:!0}),t.next=4,a.forEach((function(t,s){e.convertFileToBase64(t,(function(r){e.setState((function(e){return{selectedFile:[].concat(Object(yt.a)(e.selectedFile),[{filename:t.name,path:r}])}})),s+1===a.length&&e.setState({fileLoading:!1})}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.convertFileToBase64=function(e,t){var s=new FileReader;s.readAsDataURL(e),setTimeout((function(){t(s.result)}),2e3)},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.inputRef=r.a.createRef(),this.props.actions.getAllIssueTypes(),this.props.issueTypes.length>0&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"componentDidUpdate",value:function(e){e.issueTypes!==this.props.issueTypes&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container-fluid main-popUp",children:[this.state.types&&0!==this.state.types.length?Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Notification"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Geography"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.geography,onChange:function(t){return e.setState({geography:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),Nt&&Nt.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Category"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.category,onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types&&this.state.types.map((function(e){return Object(S.jsx)("option",{children:e},e)})),Object(S.jsx)("option",{children:"Others"})]})]}),"Others"!==this.state.category&&Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.subCategory,onChange:function(t){return e.SubCategory(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.sections&&this.state.sections.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Reason"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),vt&&vt.map((function(e){return Object(S.jsx)("option",{children:e},e)})),Object(S.jsx)("option",{children:"Others"})]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Audience"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.audience,onChange:function(t){return e.handleAudience(t.target.value)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.audienceArr&&this.state.audienceArr.map((function(e){return Object(S.jsx)("option",{children:e},e)})),Object(S.jsx)("option",{children:"Manual"},"manual")]})]})]}),"Manual"===this.state.audience&&Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Enter Mail IDs"})}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Enter email ids example:(jsmith@xx.ibm.com , jhon@in.ibm.com)",value:this.state.emailids,onChange:function(t){return e.setState({emailids:t.target.value})},type:"text",rows:"3"})]})}),Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description"})}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},type:"text",rows:"6"})]})}),"slack"!==this.state.sendAs&&Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Attach Files"})}),Object(S.jsx)("input",{type:"file",id:"input-file",onClick:function(t){t.target.value=null,e.setState({selectedFile:[]})},className:"form-control-file",onChange:this.onFileChange,multiple:!0,ref:this.inputRef})]})})]}),Object(S.jsxs)("div",{className:"card-footer createfooter",children:[Object(S.jsx)("button",{className:"btn btu-submit",onClick:function(t){return e.sendMail()},disabled:this.state.fileLoading,children:"Send"}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{className:"col-md-1 col-sm-1 sendvia-label",children:Object(S.jsx)("strong",{children:"Send Via"})}),Object(S.jsxs)("select",{className:"form-control col-md-2 col-sm-2",value:this.state.sendAs,onChange:function(t){return e.setState({sendAs:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),Object(S.jsx)("option",{value:"email",children:"Email"}),Object(S.jsx)("option",{value:"slack",children:"Slack"}),Object(S.jsx)("option",{value:"email_slack",children:"Email & Slack"})]})]}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]}):Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.errorMsg})]})}}]),s}(a.Component),Ct=Object(o.b)((function(e){return{issueTypes:e.page.issueTypes,notification:e.page.notification,user_details:e.user.user_details}}),(function(e){return{actions:Object(l.b)(v,e)}}))(St),wt=s(120),Et=s.n(wt),At=(s(348),["Bug Fix","Maintenance","DB Downtime","Application Downtime"]),kt=["America","China","Europe","India","Philippines","All"],It=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).fetchCategory=function(e){var t=[];return"Super Admin"!==a.props.user_details.role&&"Super User"!==a.props.user_details.role||(t=e&&e.map((function(e){return e.name})).filter((function(e,t,s){return s.indexOf(e)===t}))),t},a.handleChangeType=function(e){var t,s=[];s=a.props.issueTypes&&a.props.issueTypes.filter((function(t){return t.name===e.target.value})).map((function(e){return e.section})),"SME"===a.props.user_details.role?(t=s[0].filter((function(e){return a.state.propsSec.includes(e)})),a.setState({category:e.target.value,sections:t,subCategory:""})):a.setState({category:e.target.value,sections:s[0],subCategory:""})},a.SubCategory=function(e){var t=e.target.value;a.setState({subCategory:t})},a.handleReset=function(){a.setState({category:"",subCategory:"",reason:"",geography:"",audience:"",start:"",end:"",description:"",audienceArr:[],displayStart:new Date,displayEnd:new Date})},a.saveInfo=function(){if(""===a.state.category||""===a.state.reason||""===a.state.subCategory||""===a.state.geography)a.setState({err:!0,errorMsg:"Please fill all fields",iconColor:"text-danger"}),a.error();else if(""!==a.state.reason&&""===a.state.start)a.setState({err:!0,errorMsg:"Please enter start date",iconColor:"text-danger"}),a.error();else if(""!==a.state.reason&&""===a.state.end)a.setState({err:!0,errorMsg:"Please enter end date",iconColor:"text-danger"}),a.error();else if(""!==a.state.reason&&""===a.state.description)a.setState({err:!0,errorMsg:"Please enter description",iconColor:"text-danger"}),a.error();else{var e=Object.assign({},{category:a.state.category,subCategory:a.state.subCategory,reason:a.state.reason,geography:a.state.geography,start:a.state.start,end:a.state.end,description:a.state.description,user:a.props.user_details.userEmail,loggedinUser:a.props.user_details.username,loggedinEmail:a.props.user_details.userEmail});a.props.actions.postNotification(e),setTimeout((function(){a.props.notification&&200===a.props.notification.status?(a.setState({err:!0,errorMsg:"Notification Added Successfully",iconColor:"text-success",spinnerFlag:!1,emailids:""}),a.error(),a.handleReset()):(a.setState({err:!0,errorMsg:"Something went wrong",iconColor:"text-danger",spinnerFlag:!1}),a.error())}),2e3)}},a.error=function(){setTimeout((function(){a.setState({err:!1,errorMsg:"",iconColor:""})}),3300)},a.handleInputDate=function(e){return e.toISOString()},a.state={types:[],sections:[],category:"",subCategory:"",reason:"",description:"",err:!1,errorMsg:"",iconColor:"",spinnerFlag:!1,propsSec:[],audience:"",audienceArr:[],emailids:"",geography:"",start:"",end:"",displayStart:new Date,displayEnd:new Date},a}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllIssueTypes(),this.props.issueTypes.length>0&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"componentDidUpdate",value:function(e){e.issueTypes!==this.props.issueTypes&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container-fluid main-popUp",children:[Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Notification"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Geography"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.geography,onChange:function(t){return e.setState({geography:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),kt&&kt.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Category"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.category,onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types&&this.state.types.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.subCategory,onChange:function(t){return e.SubCategory(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.sections&&this.state.sections.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Reason"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),At&&At.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]})]}),""!==this.state.reason&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"row mt-3",children:[Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Start Date and Time"})}),Object(S.jsx)(Et.a,{selected:this.state.displayStart,className:"form-control",onChange:function(t){e.setState({displayStart:t}),e.setState({start:e.handleInputDate(t)})},locale:"en",showTimeSelect:!0,timeFormat:"p",timeIntervals:1,dateFormat:"Pp"})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"End Date and Time"})}),Object(S.jsx)(Et.a,{selected:this.state.displayEnd,className:"form-control",onChange:function(t){e.setState({displayEnd:t}),e.setState({end:e.handleInputDate(t)})},locale:"en",showTimeSelect:!0,timeFormat:"p",timeIntervals:1,dateFormat:"Pp",minDate:this.state.displayStart})]})]}),Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description"})}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},type:"text",rows:"6"})]})})]})]}),Object(S.jsxs)("div",{className:"card-footer createfooter",children:[Object(S.jsx)("button",{className:"btn btu-submit",onClick:function(t){return e.saveInfo()},children:"Send"}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.errorMsg})]})}}]),s}(a.Component),Dt=Object(o.b)((function(e){return{issueTypes:e.page.issueTypes,notification:e.page.notification,allUsers:e.page.allUsers,user_details:e.user.user_details}}),(function(e){return{actions:Object(l.b)(v,e)}}))(It),_t=["Bug Fix","Maintenance","DB Downtime","Application Downtime"],Rt=["America","China","Europe","India","Philippines","All"],Ut=["SME","Country Lead","DPE","Domain Lead","Geo Lead","Geo Practice Lead","Global Delivery Lead","Global Practice Lead","PE","Squad Lead","Squad Member","Super Admin","Super User","Tribe Lead"],Lt=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).fetchCategory=function(e){var t=[];return"Super Admin"!==a.props.user_details.role&&"Super User"!==a.props.user_details.role||(t=e.map((function(e){return e.name})).filter((function(e,t,s){return s.indexOf(e)===t}))),t},a.handleChangeType=function(e){var t,s=[];s=a.props.issueTypes&&a.props.issueTypes.filter((function(t){return t.name===e.target.value})).map((function(e){return e.section})),"SME"===a.props.user_details.role?(t=s[0].filter((function(e){return a.state.propsSec.includes(e)})),a.setState({category:e.target.value,sections:t,subCategory:""})):a.setState({category:e.target.value,sections:s[0],subCategory:"",audience:""}),"Insights 360"===e.target.value?a.setState({audienceArr:Ut}):a.setState({audienceArr:[]})},a.SubCategory=function(e){var t=e.target.value;a.setState({subCategory:t,audience:""})},a.handleReset=function(){a.setState({category:"",subCategory:"",reason:"",geography:"",audience:"",start:"",end:"",description:"",audienceArr:[],sendAs:"email_slack",displayStart:new Date,displayEnd:new Date,selectedFile:[],fileLoading:!1})},a.saveInfo=function(){if(""===a.state.category||""===a.state.reason||""===a.state.audience||""===a.state.subCategory||""===a.state.geography)a.setState({err:!0,errorMsg:"Please fill all fields",iconColor:"text-danger"}),a.error();else if("Maintenance"===a.state.reason&&""===a.state.start)a.setState({err:!0,errorMsg:"Please enter start date",iconColor:"text-danger"}),a.error();else if("Maintenance"===a.state.reason&&""===a.state.end)a.setState({err:!0,errorMsg:"Please enter end date",iconColor:"text-danger"}),a.error();else if("Maintenance"===a.state.reason&&""===a.state.description)a.setState({err:!0,errorMsg:"Please enter description",iconColor:"text-danger"}),a.error();else{a.setState({spinnerFlag:!0});var e=[],t="";""!==a.state.emailids?(e=a.state.emailids.replace(/\s\s*/g,"").split(","),t="in"):(t="not_in",e=[]);var s=Object.assign({},{category:a.state.category,subCategory:a.state.subCategory,reason:a.state.reason,geography:a.state.geography,audience:a.state.audience,start:a.state.start,end:a.state.end,description:a.state.description,userList:e.length>0?e:[],user:a.props.user_details.userEmail,loggedinUser:a.props.user_details.username,loggedinEmail:a.props.user_details.userEmail,type:t,selectedFile:a.state.selectedFile});"email"===a.state.sendAs?a.props.actions.notificationMail(s):"slack"===a.state.sendAs?a.props.actions.slackNotification(s):"email_slack"===a.state.sendAs&&(a.props.actions.notificationMail(s),a.props.actions.slackNotification(s)),a.props.actions.postNotification(s),setTimeout((function(){a.props.notification&&200===a.props.notification.status?(a.setState({err:!0,errorMsg:"Notification Added Successfully",iconColor:"text-success",spinnerFlag:!1,emailids:""}),a.error(),a.handleReset()):(a.setState({err:!0,errorMsg:"Something went wrong",iconColor:"text-danger",spinnerFlag:!1}),a.error())}),5e3)}},a.error=function(){setTimeout((function(){a.setState({err:!1,errorMsg:"",iconColor:""})}),3300)},a.handleAudience=function(e){var t=e;a.setState({audience:t,emailids:""})},a.handleInputDate=function(e){return e.toISOString()},a.onFileChange=function(){var e=Object(jt.a)(ht.a.mark((function e(t){var s;return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object.values(t.target.files),a.setState({fileLoading:!0}),e.next=4,s.forEach((function(e,t){a.convertFileToBase64(e,(function(r){a.setState((function(t){return{selectedFile:[].concat(Object(yt.a)(t.selectedFile),[{filename:e.name,path:r}])}})),t+1===s.length&&a.setState({fileLoading:!1})}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.convertFileToBase64=function(e,t){var s=new FileReader;s.readAsDataURL(e),setTimeout((function(){t(s.result)}),2e3)},a.state={types:[],sections:[],category:"",subCategory:"",reason:"",description:"",err:!1,errorMsg:"",iconColor:"",spinnerFlag:!1,propsSec:[],audience:"",audienceArr:[],emailids:"",geography:"",sendAs:"email_slack",displayStart:new Date,displayEnd:new Date,selectedFile:[],fileLoading:!1},a}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllIssueTypes(),this.props.issueTypes.length>0&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"componentDidUpdate",value:function(e){e.issueTypes!==this.props.issueTypes&&this.setState({types:this.fetchCategory(this.props.issueTypes)})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"container-fluid main-popUp",children:[Object(S.jsxs)("div",{className:"main-popUp",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Notification"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Geography"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.geography,onChange:function(t){return e.setState({geography:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),Rt&&Rt.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Category"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.category,onChange:function(t){return e.handleChangeType(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.types&&this.state.types.map((function(e){return Object(S.jsx)("option",{children:e},e)})),Object(S.jsx)("option",{children:"Others"})]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Portals & Dashboard"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.subCategory,onChange:function(t){return e.SubCategory(t)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.sections&&this.state.sections.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Reason"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),_t&&_t.map((function(e){return Object(S.jsx)("option",{children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Audience"})}),Object(S.jsxs)("select",{className:"form-control",value:this.state.audience,onChange:function(t){return e.handleAudience(t.target.value)},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),this.state.audienceArr&&this.state.audienceArr.map((function(e){return Object(S.jsx)("option",{children:e},e)})),Object(S.jsx)("option",{children:"Manual"},"manual")]})]})]}),"Manual"===this.state.audience&&Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Enter Mail IDs"})}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Enter email ids ex:(jsmith@xx.ibm.com , jhon@in.ibm.com)",value:this.state.emailids,onChange:function(t){return e.setState({emailids:t.target.value})},type:"text",rows:"3"})]})})]}),Object(S.jsx)("br",{}),""!==this.state.reason&&Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Notification"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row mt-3",children:[Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Start Date and Time"})}),Object(S.jsx)(Et.a,{selected:this.state.displayStart,className:"form-control",onChange:function(t){e.setState({displayStart:t}),e.setState({start:e.handleInputDate(t)})},locale:"en",showTimeSelect:!0,timeFormat:"p",timeIntervals:1,dateFormat:"Pp"})]}),Object(S.jsxs)("div",{className:"col-md col-sm",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"End Date and Time"})}),Object(S.jsx)(Et.a,{selected:this.state.displayEnd,className:"form-control",onChange:function(t){e.setState({displayEnd:t}),e.setState({end:e.handleInputDate(t)})},locale:"en",showTimeSelect:!0,timeFormat:"p",timeIntervals:1,dateFormat:"Pp",minDate:this.state.displayStart})]})]}),Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description"})}),Object(S.jsx)("textarea",{className:"form-control",placeholder:"Description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},type:"text",rows:"6"})]})}),"slack"!==this.state.sendAs&&Object(S.jsx)("div",{className:"row mt-3",children:Object(S.jsxs)("div",{className:"col-sm col-md",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Attach Files"})}),Object(S.jsx)("input",{type:"file",id:"input-file2",onClick:function(t){t.target.value=null,e.setState({selectedFile:[]})},className:"form-control-file",onChange:this.onFileChange,multiple:!0})]})})]}),Object(S.jsxs)("div",{className:"card-footer createfooter",children:[Object(S.jsx)("button",{className:"btn btu-submit",onClick:function(t){return e.saveInfo()},disabled:this.state.fileLoading,children:"Send"}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{className:"col-md-1 col-sm-1 sendvia-label",children:Object(S.jsx)("strong",{children:"Send Via"})}),Object(S.jsxs)("select",{className:"form-control col-md-2 col-sm-2",value:this.state.sendAs,onChange:function(t){return e.setState({sendAs:t.target.value})},children:[Object(S.jsx)("option",{value:"",disabled:!0,children:"Choose from dropdown"}),Object(S.jsx)("option",{value:"email",children:"Email"}),Object(S.jsx)("option",{value:"slack",children:"Slack"}),Object(S.jsx)("option",{value:"email_slack",children:"Email & Slack"})]})]}),!0===this.state.spinnerFlag&&Object(S.jsx)("div",{className:"text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})]}),Object(S.jsx)(T.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.err,className:"snacking",message:this.state.errorMsg})]})}}]),s}(a.Component),Mt=Object(o.b)((function(e){return{issueTypes:e.page.issueTypes,notification:e.page.notification,user_details:e.user.user_details}}),(function(e){return{actions:Object(l.b)(v,e)}}))(Lt),Pt=s(366),Ft=s.n(Pt),Bt=s(364),Wt=s.n(Bt),Gt=[{name:"DATE_TIME",label:"Date & Time",options:{filter:!0,sort:!0}},{name:"DESCRIPTION",label:"Description",options:{filter:!0,sort:!0}},{name:"GEOGRAPHY",label:"Geography",options:{filter:!0,sort:!0}},{name:"ISSUE_CATEGORY",label:"Issue Category",options:{filter:!0,sort:!0}},{name:"ISSUE_TYPE",label:"Issue Type",options:{filter:!0,sort:!0}},{name:"REASONS",label:"Reasons",options:{filter:!0,sort:!0}},{name:"USER",label:"Users",options:{filter:!0,sort:!0}}],Yt=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={tableData:[],show:!1},e.handleClose=function(){e.setState({show:!1})},e}return Object(O.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.actions.getAllNotification()}},{key:"componentDidUpdate",value:function(e){e.allNotification!==this.props.allNotification&&this.props.allNotification&&0!==this.props.allNotification.length&&this.setState({tableData:this.props.allNotification})}},{key:"render",value:function(){var e=this,t={print:!1,search:!0,download:!1,filter:!1,viewColumns:!1,filterType:"dropdown",selectableRows:!1,pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:10,displayRows:"of"},onRowClick:function(t,s){var a=s.dataIndex,r=e.state.tableData[a];e.setState({show:!0,dateTime:r.DATE_TIME,description:r.DESCRIPTION,geography:r.GEOGRAPHY,issueCategory:r.ISSUE_CATEGORY,issueType:r.ISSUE_TYPE,reasons:r.REASONS,users:r.USER})}};return Object(S.jsxs)("div",{className:"container-fluid NotificationTable",children:[Object(S.jsx)(Te.a,{title:"Notifications Log",data:this.state.tableData,columns:Gt,options:t}),Object(S.jsxs)(Se.a,{show:this.state.show,onHide:function(t){return e.handleClose()},dialogClassName:"modal-record",size:"lg",children:[Object(S.jsx)(Se.a.Header,{style:{borderBottom:"5px #0c5bac solid",color:"#0c5bac"},closeButton:!0,children:Object(S.jsx)(Se.a.Title,{children:""!==this.state.reasons&&""!==this.state.issueCategory?this.state.reasons+" - "+this.state.issueCategory:"Log"})}),Object(S.jsx)(Se.a.Body,{className:"modal_body",children:Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Date & Time"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.dateTime,type:"text"})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Geography"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.geography,type:"text"})]})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Category"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.issueCategory,type:"text"})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Issue Type"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.issueType,type:"text"})]})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Reasons"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.reasons,type:"text"})]}),Object(S.jsxs)("div",{className:"col-sm-6 col-md-6",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Users"})}),Object(S.jsx)("input",{readOnly:!0,className:"form-control",value:this.state.users,type:"text"})]})]}),Object(S.jsx)("div",{className:"row mt-2",children:Object(S.jsxs)("div",{className:"col-sm-12 col-md-12",children:[Object(S.jsx)("label",{children:Object(S.jsx)("strong",{children:"Description"})}),Object(S.jsx)("textarea",{className:"form-control",value:this.state.description,readOnly:!0,type:"text",rows:"6"})]})})]})})]})]})}}]),s}(a.Component),Ht=Object(o.b)((function(e){return{allNotification:e.page.allNotification}}),(function(e){return{actions:Object(l.b)({getAllNotification:v.getAllNotification},e)}}))(Yt),zt=(s(504),s(147)),Kt=s(549),qt=s(321),Vt=Object(qt.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{margin:e.spacing(3),width:"100%"},button:{margin:"auto",display:"block",backgroundColor:"#0c5bac"},progress:{margin:"10px auto",display:"block",color:"#0c5bac"},errorInput:{fontSize:"18px",color:"red",fontWeight:600,margin:"10px auto",display:"block",textAlign:"center"}}})),Jt=function(e){var t=Vt(),s=Object(a.useState)(new Date),r=Object(zt.a)(s,2),n=r[0],i=r[1],c=Object(a.useState)(new Date),l=Object(zt.a)(c,2),d=l[0],u=l[1],p=Object(a.useState)(!1),h=Object(zt.a)(p,2),j=h[0],m=h[1],b=Object(a.useState)(""),g=Object(zt.a)(b,2),O=g[0],x=g[1],f=Object(o.c)((function(e){return e.user.user_details}));return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"card main-card",children:[Object(S.jsx)("div",{className:"card-header text-center createheader",children:"Select Date Range To Download Activity Log"}),Object(S.jsxs)("div",{className:"card-body cardbody",children:[Object(S.jsxs)(Kt.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:4,children:[Object(S.jsx)(Kt.a,{container:!0,item:!0,xs:3,spacing:0}),Object(S.jsx)(Kt.a,{container:!0,item:!0,xs:3,spacing:0,children:Object(S.jsx)(Ae.a,{id:"date",label:"From Date",type:"date",value:n,onChange:function(e){i(e.target.value),x("")},className:t.textField,InputLabelProps:{shrink:!0}})}),Object(S.jsx)(Kt.a,{container:!0,item:!0,xs:3,spacing:0,children:Object(S.jsx)(Ae.a,{id:"date",label:"To Date",type:"date",value:d,onChange:function(e){u(e.target.value),x("")},className:t.textField,inputProps:{min:n},InputLabelProps:{shrink:!0}})}),Object(S.jsx)(Kt.a,{container:!0,item:!0,xs:3,spacing:0})]}),Object(S.jsx)(le.a,{className:t.button,onClick:function(){m(!0),x(""),Ke.a.post("/api/v1/actionData",{fromDate:n,toDate:d,loggedinUser:f.username,email:f.userEmail}).then((function(e){if(200===e.status&&"Action Log Retreived"===e.data.message){var t=e.data.data.length>0?e.data.data.reverse():e.data.data,s=function(e,t){return null===t?"":t},a=Object.keys(t[0]),r=t.map((function(e){return a.map((function(t){return JSON.stringify(e[t],s)})).join(",")}));r.unshift(a.join(",")),r=r.join("\r\n"),m(!1);var i=document.createElement("a"),c=new Blob(["\ufeff",r]),o=URL.createObjectURL(c);i.href=o,i.download="WS3 Ticketing ".concat(n," to ").concat(d," Action Logs.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}else m(!1),x("Change Date and Try Again")})).catch((function(e){m(!1),x("Change Date and Try Again")}))},variant:"contained",color:"primary",children:"Get Log"}),!0===j&&Object(S.jsx)(oe.a,{className:t.progress}),""!==O&&Object(S.jsx)("span",{className:t.errorInput,children:O})]})]})})},Qt=function(e){return Object(S.jsx)("div",{children:Object(S.jsx)("iframe",{src:"https://app.powerbi.com/reportEmbed?reportId=b821eebf-d96f-4c22-bdde-3961058e8361&autoAuth=true&ctid=c28301bb-e8ea-480b-a82a-cf3553901822&config=eyJjbHVzdGVyVXJsIjoiaHR0cHM6Ly93YWJpLWluZGlhLWNlbnRyYWwtYS1wcmltYXJ5LXJlZGlyZWN0LmFuYWx5c2lzLndpbmRvd3MubmV0LyJ9",title:"Self D",width:"100%",height:"720",frameBorder:"0",allowFullScreen:!0})})},Xt=(Object(o.b)((function(e){return{}}),{})(Qt),280),Zt=[{title:"Raise New Ticket",icon:Object(S.jsx)(ae.a,{})},{title:"My Ticket Logs",icon:Object(S.jsx)(ce.a,{})}],$t=[{title:"Raise New Ticket",icon:Object(S.jsx)(ae.a,{})},{title:"My Ticket Logs",icon:Object(S.jsx)(ce.a,{})},{title:"My Queue",icon:Object(S.jsx)(nt.a,{})}],es=[{title:"Raise New Ticket",icon:Object(S.jsx)(ae.a,{}),route:"/new-ticket"},{title:"My Ticket Logs",icon:Object(S.jsx)(ce.a,{}),route:"/my-tickets"},{title:"All Ticket Logs",icon:Object(S.jsx)(Me.a,{}),route:"/all-tickets"},{title:"Command Center",icon:Object(S.jsx)(Wt.a,{}),route:"/dashboard"},{title:"Profiles",icon:Object(S.jsx)(tt.a,{}),route:"/profile"},{title:"Additional Tool Set",sections:[{name:"Notification",tabs:[{sub:"Email Notification"},{sub:"Pop-Up Notification"},{sub:"Email & Pop-Up"}],icon:Object(S.jsx)(ut.a,{})},{name:"Adding Issues",tabs:[],icon:Object(S.jsx)(Be.a,{})}],icon:Object(S.jsx)(L.a,{}),route:"/tools"},{title:"Upload",icon:Object(S.jsx)(lt.a,{}),route:"/upload"},{title:"All Notifications",icon:Object(S.jsx)(Ft.a,{}),route:"/notification-log"},{title:"Activity Log",icon:Object(S.jsx)(ne.a,{}),route:"/action-log"}],ts=[{title:"Raise New Ticket",icon:Object(S.jsx)(ae.a,{}),route:"/new-ticket"},{title:"My Ticket Logs",icon:Object(S.jsx)(ce.a,{}),route:"/my-tickets"},{title:"All Ticket Logs",icon:Object(S.jsx)(Me.a,{}),route:"/all-tickets"},{title:"Profiles",icon:Object(S.jsx)(tt.a,{}),route:"/profile"},{title:"Additional Tool Set",sections:[{name:"Notification",tabs:[{sub:"Email Notification"},{sub:"Pop-Up Notification"},{sub:"Email & Pop-Up"}],icon:Object(S.jsx)(ut.a,{})},{name:"Adding Issues",tabs:[],icon:Object(S.jsx)(Be.a,{})}],icon:Object(S.jsx)(L.a,{}),route:"/tools"}],ss=[{title:"Raise New Ticket",icon:Object(S.jsx)(ae.a,{})},{title:"My Ticket Logs",icon:Object(S.jsx)(ce.a,{})},{title:"Profiles",icon:Object(S.jsx)($e.a,{})}],as=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(g.a)(this,s),(a=t.call(this,e)).handleDrawerOpen=function(){a.setState({open:!0,name:"rightopen",tabs:""})},a.handleDrawerClose=function(){a.setState({open:!1,name:"rightclose",tabs:"tabClose"})},a.handleMenu=function(e){"Additional Tool Set"!==e?a.setState({menu:e,menus:"",expandedPanel:"",sub_tab:[],tab:""}):a.setState({menu:e})},a.handleExpansionPanelChange=function(e){return function(t,s){var r;"Additional Tool Set"===e&&(r="Notification");var n=a.state.options.filter((function(t){return t.title===e})).map((function(e){return e.sections?e.sections:[]}))[0].filter((function(e){return e.name&&e.name===r})).map((function(e){return e.tabs?e.tabs:[]}));s?a.setState({expandedPanel:e,menu:e,menus:r,sub_tab:n[0],tab:n[0].length>0?n[0][0].sub:""}):a.setState({expandedPanel:!1,menu:"",sub_tab:[],tab:""})}},a.handleMenus=function(e){var t=a.state.options.filter((function(e){return e.title===a.state.expandedPanel})).map((function(e){return e.sections?e.sections:[]}))[0].filter((function(t){return t.name&&t.name===e})).map((function(e){return e.tabs?e.tabs:[]}));a.setState({menus:e,sub_tab:t[0],tab:t[0].length>0?t[0][0].sub:""})},a.subTabChange=function(e){a.setState({tab:e})},a.state={timeout:3e5,showModal:!1,userLoggedIn:!1,isTimedOut:!1,open:!0,menu:"Raise New Ticket",name:"rightopen",options:"",menus:"",sub_tab:[],tab:""},a.idleTimer=null,a.onAction=a._onAction.bind(Object(E.a)(a)),a.onActive=a._onActive.bind(Object(E.a)(a)),a.onIdle=a._onIdle.bind(Object(E.a)(a)),a.handleClose=a._handleClose.bind(Object(E.a)(a)),a}return Object(O.a)(s,[{key:"_onAction",value:function(e){this.setState({isTimedOut:!1})}},{key:"_onActive",value:function(e){this.setState({isTimedOut:!1})}},{key:"_onIdle",value:function(e){!0===this.state.isTimedOut?(this.setState({showModal:!1}),window.location.reload()):(this.setState({showModal:!0}),this.idleTimer.reset(),this.setState({isTimedOut:!0}))}},{key:"_handleClose",value:function(){this.setState({showModal:!1})}},{key:"UNSAFE_componentWillMount",value:function(){"User"===this.props.user_details.role?this.setState({options:Zt}):"SME"===this.props.user_details.role?this.setState({options:$t}):"Super Admin"===this.props.user_details.role?this.setState({options:es}):"Admin"===this.props.user_details.role?this.setState({options:ss}):"Super User"===this.props.user_details.role&&this.setState({options:ts})}},{key:"componentDidUpdate",value:function(e){var t=this;e.menuData!==this.props.menuData&&0!==this.props.menuData.length&&(this.handleMenu(this.props.menuData),setTimeout((function(){t.props.actions.changeMenu("")}),2e3))}},{key:"handleLogout",value:function(){window.location.reload("/")}},{key:"render",value:function(){var e,t,s=this,a=this.props,r=a.classes,n=a.theme,i=this.state,c=i.open,o=i.options;return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:r.root,children:[Object(S.jsx)(_.a,{}),Object(S.jsx)(R.a,{position:"fixed",className:Object(I.a)(r.appBar,Object(A.a)({},r.appBarShift,c)),children:Object(S.jsxs)(M.a,{children:[Object(S.jsx)(W.a,{color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen,edge:"start",className:Object(I.a)(r.menuButton,Object(A.a)({},r.hide,c)),children:Object(S.jsx)(Y.a,{})}),Object(S.jsx)(F.a,{variant:"h6",noWrap:!0,className:"heading",children:"CPSD SelfDesk"})]})}),0!==this.state.sub_tab.length&&Object(S.jsx)(R.a,{position:"fixed",className:Object(I.a)(r.appBar1,Object(A.a)({},r.appBarShift1,c)),children:Object(S.jsx)(M.a,{className:this.state.tabs,children:this.state.sub_tab&&this.state.sub_tab.map((function(e){return Object(S.jsxs)("button",{className:s.state.tab===e.sub?"activeclass":"nonactiveclass",onClick:function(t){return s.subTabChange(e.sub)},children:["\xa0\xa0\xa0\xa0\xa0",e.sub,"\xa0\xa0\xa0\xa0\xa0"]},e.sub)}))})}),Object(S.jsxs)(D.a,{variant:"permanent",className:Object(I.a)(r.drawer,(e={},Object(A.a)(e,r.drawerOpen,c),Object(A.a)(e,r.drawerClose,!c),e)),classes:{paper:Object(I.a)((t={},Object(A.a)(t,r.drawerOpen,c),Object(A.a)(t,r.drawerClose,!c),t))},children:[Object(S.jsx)("div",{className:r.toolbar,children:Object(S.jsxs)(W.a,{onClick:this.handleDrawerClose,children:[Object(S.jsx)("h6",{className:"menu-heading",children:"Menu"}),"rtl"===n.direction?Object(S.jsx)(q.a,{}):Object(S.jsx)(z.a,{className:"icon-color"})]})}),Object(S.jsx)(B.a,{}),Object(S.jsxs)(P.a,{className:"main-uiList",children:[o&&o.map((function(e,t){return Object(S.jsx)("div",{children:"Additional Tool Set"!==e.title?Object(S.jsxs)(V.a,{button:!0,className:s.state.menu===e.title?"listactiveclass":"listnonactiveclass",onClick:function(t){return s.handleMenu(e.title)},children:[Object(S.jsx)(te.a,{children:e.icon}),Object(S.jsx)(J.a,{primary:e.title})]},e.title):Object(S.jsxs)(Q.a,{expanded:"Additional Tool Set"===s.state.expandedPanel,onChange:s.handleExpansionPanelChange(e.title),className:"head-acc",children:[!0===s.state.open?Object(S.jsxs)(X.a,{expandIcon:Object(S.jsx)(ee.a,{}),onClick:function(t){return s.handleMenu(e.title)},className:"acc_summ",children:[e.icon,"\xa0\xa0\xa0   ",e.title]}):Object(S.jsx)(X.a,{expandIcon:Object(S.jsx)(ee.a,{}),onClick:function(t){return s.handleMenu(e.title)},children:e.icon}),Object(S.jsx)(Z.a,{className:"acc_details",children:Object(S.jsx)(P.a,{children:e.sections&&e.sections.length>0&&e.sections.map((function(e,t){return Object(S.jsxs)(V.a,{className:s.state.menus===e.name?"listactiveclass":"listnonactiveclass",button:!0,onClick:function(t){return s.handleMenus(e.name)},children:[Object(S.jsx)(te.a,{children:e.icon}),Object(S.jsx)(J.a,{primary:e.name})]},e.name)}))})})]})},e.title)})),Object(S.jsxs)(V.a,{button:!0,onClick:function(e){return s.handleLogout()},children:[Object(S.jsx)(te.a,{children:Object(S.jsx)(fe.a,{})}),Object(S.jsx)(J.a,{primary:"Logout"})]}),""!==this.props.user_details.username?Object(S.jsxs)(V.a,{button:!0,className:"profilemain",children:[Object(S.jsx)(te.a,{className:"profile-ico",children:Object(S.jsx)(ve.a,{})}),Object(S.jsxs)("div",{className:"profile-name",children:[Object(S.jsx)(J.a,{primary:this.props.user_details.username}),Object(S.jsx)(J.a,{primary:" ("+this.props.user_details.role+")"})]})]}):""]})]})]}),Object(S.jsx)(ft.a,{ref:function(e){s.idleTimer=e},element:document,onActive:this.onActive,onIdle:this.onIdle,onAction:this.onAction,debounce:250,timeout:this.state.timeout}),Object(S.jsxs)("div",{className:this.state.name,children:["Command Center"===this.state.menu&&Object(S.jsx)(Qt,{}),"Raise New Ticket"===this.state.menu&&Object(S.jsx)(Oe,{}),"My Ticket Logs"===this.state.menu&&Object(S.jsx)(Ue,{}),("My Queue"===this.state.menu||"All Ticket Logs"===this.state.menu)&&Object(S.jsx)(De,{}),"Profiles"===this.state.menu&&Object(S.jsx)(Xe,{}),"Upload"===this.state.menu&&Object(S.jsx)(gt,{}),"All Notifications"===this.state.menu&&Object(S.jsx)(Ht,{}),"Additional Tool Set"===this.state.menu&&"Notification"===this.state.menus&&"Email Notification"===this.state.tab&&Object(S.jsx)(Ct,{}),"Additional Tool Set"===this.state.menu&&"Notification"===this.state.menus&&"Pop-Up Notification"===this.state.tab&&Object(S.jsx)(Dt,{}),"Additional Tool Set"===this.state.menu&&"Notification"===this.state.menus&&"Email & Pop-Up"===this.state.tab&&Object(S.jsx)(Mt,{}),"Additional Tool Set"===this.state.menu&&"Adding Issues"===this.state.menus&&Object(S.jsx)(ct,{}),"Activity Log"===this.state.menu&&Object(S.jsx)(Jt,{})]}),Object(S.jsx)(xt,{showModal:this.state.showModal,handleClose:this.handleClose,handleLogout:this.handleLogout}),Object(S.jsx)(at,{})]})}}]),s}(a.Component),rs=Object(y.f)(Object(o.b)((function(e){return{user_details:e.user.user_details,menuData:e.page.menuData}}),(function(e){return{actions:Object(l.b)({changeMenu:v.changeMenu},e)}}))(Object(k.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Xt,width:"calc(100% - ".concat(Xt,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},appBar1:{marginTop:"60px",backgroundColor:"black !important"},appBarShift1:{marginLeft:Xt,marginTop:"50px",width:"calc(100% - ".concat(Xt,"px)"),backgroundColor:"black !important"},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Xt,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Xt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),zIndex:100},drawerClose:Object(A.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:100,overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),backgroundColor:"black"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}),{withTheme:!0})(as))),ns=s(374),is=s.n(ns),cs=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){return Object(g.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"render",value:function(){var e=this.props.ticketRecord;return Object(S.jsxs)("div",{style:{width:"100%"},children:[Object(S.jsx)("h3",{children:"Ticket Details:"}),e.length>0?Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Ticket Number:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("TICKET_NO")?e[0].TICKET_NO:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Issue Raised By:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("PRACTIONER")?e[0].PRACTIONER:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Status:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("STATUS")?e[0].STATUS:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Description:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("DESCRIPTION")?e[0].DESCRIPTION:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Section:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("SECTION")?e[0].SECTION:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Created Date:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("CREATED_DATE")?e[0].CREATED_DATE:""})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"TAT:"}),Object(S.jsx)("td",{children:e[0].hasOwnProperty("TAT")?e[0].TAT:""})]})]})}):"Ticket Not Found."]})}}]),s}(a.Component);cs.defaultProps={steps:void 0};var os=Object(o.b)((function(e){return{ticketRecord:e.page.ticketRecord}}),(function(e){return{actions:Object(l.b)({changeMenu:v.changeMenu,getAllIssues:v.getAllIssues},e)}}))(cs),ls=(s(506),function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={chatbotKey:0},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){this.handleEnd=this.handleEnd.bind(this)}},{key:"handleEnd",value:function(e){e.steps,e.values;this.setState((function(e){return{chatbotKey:e.chatbotKey+1}}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)("div",{children:Object(S.jsx)(is.a,{headerTitle:"Chat Support",floating:!0,handleEnd:this.handleEnd,steps:[{id:"initilize",message:"Hello, What would you like me to do?",trigger:function(e){e.value,e.steps;return"main-option"}},{id:"main-option",options:[{value:"raise-query",label:"Raise Query",trigger:"raise-query"},{value:"my-queue",label:"Tickets in Queue",trigger:"my-queue"},{value:"my-tickets",label:"Tickets Raised",trigger:"my-ticket"},{value:"ticket-status",label:"Check Ticket Status ",trigger:"ticket-status"}]},{id:"raise-query",message:"You are in Raise Ticket Page!",trigger:function(t){t.value,t.steps;return e.props.actions.changeMenu("Raise New Ticket"),"initilize"}},{id:"my-queue",message:"You are in My Ticket page",trigger:function(t){t.value,t.steps;return e.props.actions.changeMenu("My Ticket Logs"),"initilize"}},{id:"my-ticket",message:"You are in My Queue page",trigger:function(t){t.value,t.steps;return e.props.actions.changeMenu("All Ticket Logs"),"initilize"}},{id:"ticket-status",message:"Enter Ticket Number: ",trigger:"get-ticket"},{id:"get-ticket",user:!0,validator:function(e){return!isNaN(e)||"Enter valid Ticket Number"},trigger:function(t){var s,a=t.value;t.steps;return s="Super Admin"===e.props.user_details.role||"Super User"===e.props.user_details.role?{email:e.props.user_details.userEmail,role:e.props.user_details.role,data:"getall"}:{email:e.props.user_details.userEmail,role:e.props.user_details.role,data:"allissues",category:e.props.user_details.section},Ke.a.post("/api/v1/getAllIssues",s).then((function(t){200===t.status&&t.data.hasOwnProperty("data")&&t.data.data.length>0?e.props.actions.fetchTicketByNumber(a,t.data.data):e.props.actions.fetchTicketByNumber(a,[])})).catch((function(t){e.props.actions.fetchTicketByNumber(a,[])})),"fetch-ticket"}},{id:"fetch-ticket",component:Object(S.jsx)(os,{}),asMessage:!1,delay:5e3,trigger:"end-step"},{id:"end-step",message:"Start Chat Again. Thank You!",trigger:"final-step"},{id:"final-step",delay:2e4,message:"...",end:!0}]},this.state.chatbotKey)})}}]),s}(a.Component)),ds=Object(o.b)((function(e){return{user_details:e.user.user_details,ticketRecord:e.page.ticketRecord}}),(function(e){return{actions:Object(l.b)({changeMenu:v.changeMenu,fetchTicketByNumber:v.fetchTicketByNumber},e)}}))(ls),us=function(e){Object(x.a)(s,e);var t=Object(f.a)(s);function s(){return Object(g.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"render",value:function(){var e=this.props.user;return e&&!0===e.isLoginSuccess?Object(S.jsxs)("div",{children:[Object(S.jsx)(rs,{}),Object(S.jsx)(ds,{}),Object(S.jsx)(c.a,{})]}):Object(S.jsxs)(c.a,{children:[Object(S.jsx)(y.b,{exact:!0,path:"/",component:w}),Object(S.jsx)(y.b,{exact:!0,path:"**",render:function(){return Object(S.jsx)(y.a,{to:"/"})}})]})}}]),s}(a.Component),ps=Object(o.b)((function(e){return{user:e.user,page:e.page,isLoginPending:e.user.isLoginPending,isLoginSuccess:e.user.isLoginSuccess,isLoginError:e.user.isLoginError,Success:e.page.Success}}),(function(e){return{actions:Object(l.b)({login:v.login},v,e)}}))(us);Boolean();var hs,js=s(54),ms=Object(js.a)(),bs=Object(l.e)(b,hs,Object(l.d)(Object(l.a)(d.a)));i.a.render(Object(S.jsx)(o.a,{history:ms,store:bs,children:Object(S.jsx)(c.a,{children:Object(S.jsx)(ps,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return i}));var a="SET_LOGIN_PENDING",r="SET_LOGIN_SUCCESS",n="SET_LOGIN_ERROR",i="LOGOUT"}},[[507,1,2]]]);
//# sourceMappingURL=main.09959d9d.chunk.js.map